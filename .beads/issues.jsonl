{"id":"langley-00b","title":"State management: flow cap, reconnect, cleanup","description":"Three related state issues: (1) 100-flow client-side cap with no pagination or user control (line 231). Users can never see historical data beyond ~100 flows without export. (2) No re-fetch on WebSocket reconnect — flow list goes stale after disconnect. (3) Settings toast setTimeout has no cleanup on unmount (lines 970-976). QA audit ref: P2-06, P2-05, P3-07.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:54:42.83679-05:00","updated_at":"2026-01-31T16:54:42.83679-05:00","labels":["state","ux"]}
{"id":"langley-092","title":"STYLE-GUIDE vs CSS: Buttons section claims 'States: hover, active, disabled, focus-visible' but CSS has NO :active state rules for any button, and NO :focus-visible rules for any button. Only :hover and :disabled exist.","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T02:22:21.5976284-05:00","updated_at":"2026-01-31T02:52:12.503073-05:00","closed_at":"2026-01-31T02:52:12.503073-05:00","close_reason":"Closed"}
{"id":"langley-0ul","title":"RISK: WebSocket auth will need update for OAuth flow","description":"Current WebSocket auth (internal/ws/websocket.go:225-235) accepts token in query param. OAuth flow implications:\\n1. WebSocket needs to accept access_token, not client_secret\\n2. What happens when access_token expires mid-connection?\\n3. Should WebSocket connections require re-auth on token refresh?\\n4. Test coverage for OAuth WebSocket auth needed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:39:07.5879892-05:00","updated_at":"2026-01-25T17:20:40.6305223-05:00","closed_at":"2026-01-25T17:20:40.6305223-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-12r","title":"HIGH: Certificate serial numbers use predictable timestamps","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:19:57.8711922-05:00","updated_at":"2026-01-24T18:38:22.8569407-05:00","closed_at":"2026-01-24T18:38:22.8569407-05:00","close_reason":"Already fixed. internal/tls/ca.go:117-120 uses generateRandomSerial() for cryptographically random serial numbers."}
{"id":"langley-15t","title":"REDACTION GAP: No redaction for Gemini API keys (AIza*)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T12:23:17.1771208-05:00","updated_at":"2026-01-24T16:14:27.6402407-05:00","closed_at":"2026-01-24T16:14:27.6402407-05:00","close_reason":"Fixed in Phase 2.2.5 - Gemini pattern"}
{"id":"langley-19d","title":"STYLE-GUIDE vs CSS: Spacing claims '4px base scale' but CSS uses rem units throughout (0.125rem, 0.25rem, 0.375rem, 0.5rem, 0.75rem, 1rem, 1.25rem, 1.5rem, 2rem, 4rem). At default 16px root, these map to 2,4,6,8,12,16,20,24,32,64 - the value 6px (0.375rem) and 20px (1.25rem) and 2px (0.125rem) are NOT multiples of 4. Three violations of the 4px grid.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:23:28.6965485-05:00","updated_at":"2026-01-31T07:41:00.2885861-05:00","closed_at":"2026-01-31T07:41:00.2885861-05:00","close_reason":"Already resolved: style guide spacing scale includes 2, 6, 20px. CSS values 0.125rem, 0.375rem, 1.25rem all within documented scale."}
{"id":"langley-1c7","title":"3.2 Fix Analytics view","description":"Analytics view is broken (needs reproduction and screenshot).\n\nSteps:\n1. Screenshot current broken state\n2. Identify root cause\n3. Fix it\n4. Screenshot working state\n5. Manual verification passes\n\nAcceptance:\n- All analytics charts render correctly\n- Stats cards show accurate data\n- Daily cost chart displays properly","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T17:21:44.8774957-05:00","updated_at":"2026-01-25T17:43:27.8505075-05:00","closed_at":"2026-01-25T17:43:27.8505075-05:00","close_reason":"Fixed: Added width: 100% to .container CSS. Root cause was flex column layout causing container to shrink to content width."}
{"id":"langley-1o6","title":"UX: Tools and empty views show no empty state message","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T07:04:43.4820784-05:00","updated_at":"2026-01-31T07:13:41.575428-05:00","closed_at":"2026-01-31T07:13:41.575428-05:00","close_reason":"Added empty state messages to Tasks and Tools views","labels":["consistency","ux-audit"]}
{"id":"langley-1sf","title":"LOW: Express 5.x is still relatively new - may have undiscovered vulnerabilities","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:21:54.5366606-05:00","updated_at":"2026-01-24T16:16:00.2026439-05:00","closed_at":"2026-01-24T16:16:00.2026439-05:00","close_reason":"N/A - Langley is Go-based, not Node/Express"}
{"id":"langley-1ug","title":"HIGH: Unix socket created with world-readable permissions (0666)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:19:51.326373-05:00","updated_at":"2026-01-24T18:38:51.33409-05:00","closed_at":"2026-01-24T18:38:51.33409-05:00","close_reason":"False positive. No Unix socket in codebase - all listeners use TCP (main.go:190, mitm.go:136, proxy.go:84)."}
{"id":"langley-1vm","title":"Export: 30 flows missing status_code despite flow_integrity=complete","description":"## E2E Finding (S7.3)\n\nGET /api/flows/export?format=json returns 3886 flows. 30 of them are missing the status_code field entirely, despite having flow_integrity=\"complete\".\n\n**Expected:** Every exported flow includes id, host, method, path, and status_code. If a flow has no status code (e.g. connection failed before response), export should include status_code: 0 or null rather than omitting the field.\n\n**Observed:**\n- 30/3886 flows missing status_code\n- Example: flow ccd75c72 host=mcp.context7.com:443 method=POST path=/mcp flow_integrity=complete — no status_code field\n- All missing flows appear to be POST requests to MCP endpoints\n\n**Impact:** Export consumers parsing flows will hit undefined/missing field errors. The flow_integrity=complete marker is misleading when required fields are absent.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T08:31:00.8085258-05:00","updated_at":"2026-01-31T10:15:22.5870209-05:00","closed_at":"2026-01-31T10:15:22.5870209-05:00","close_reason":"Closed"}
{"id":"langley-262","title":"UX: No deep linking — hash URLs ignored","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:04:07.3571231-05:00","updated_at":"2026-01-31T01:34:06.5259315-05:00","closed_at":"2026-01-31T01:34:06.5259315-05:00","close_reason":"Closed","labels":["navigation","ux-audit"]}
{"id":"langley-269","title":"2.4.5: FTS5 full-text search on bodies","description":"Research spike to find right setup.\n\nGoal: Search captured request/response bodies.\n\nQuestions to answer:\n- Does modernc/sqlite include FTS5? (PoC required per PHASE2.md)\n- If not, fallback to LIKE queries acceptable?\n- Index redacted bodies only (security)\n- How to handle redaction pattern changes on existing data?\n- Search UI/UX in dashboard?\n\nFrom PHASE2.md:\n```go\n// Verify FTS5 support\n_, err := db.Exec(`CREATE VIRTUAL TABLE test_fts USING fts5(content)`)\n```\n\nAcceptance: PoC confirms FTS5 works or documents fallback.","notes":"PoC COMPLETE: FTS5 confirmed working with modernc/sqlite. TestFTS5Support passes. Next: Add flows_fts table, /api/flows/search endpoint, search UI.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:04:33.7711789-05:00","updated_at":"2026-01-24T18:14:40.1150226-05:00","closed_at":"2026-01-24T18:14:40.1150226-05:00","labels":["phase2","spike"]}
{"id":"langley-2cq","title":"Extract FlowListView and AnomaliesView components","description":"Extract renderFlows and renderAnomalies into standalone components. These are the two most complex views due to cross-navigation. FlowListView: receives filteredFlows, filter state+setters (hostFilter, taskFilter, statusFilter), selectedIndex, onFlowSelect, export handlers (startExport), initialLoading, stats.total_flows for count display. AnomaliesView: receives anomalies, selectedIndex, and an onViewFlow(flowId: string) callback for cross-nav to flow detail.","acceptance_criteria":"- web/src/components/FlowListView.tsx with typed props\n- web/src/components/AnomaliesView.tsx with typed props\n- FlowListView: all 3 filter inputs work (host, task ID, status dropdown)\n- FlowListView: clear buttons on text filters work\n- FlowListView: export dropdown triggers startExport callback\n- FlowListView: flow count banner shows when total \u003e displayed\n- FlowListView: role=listbox, role=option, aria-selected, aria-activedescendant preserved\n- AnomaliesView: View Flow button triggers onViewFlow callback\n- AnomaliesView: severity badge classes preserved\n- scrollIntoView on keyboard-selected items preserved\n- Empty states rendered correctly\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:55:11.2031919-05:00","updated_at":"2026-01-31T18:42:36.4362627-05:00","closed_at":"2026-01-31T18:42:36.4362627-05:00","close_reason":"Extracted FlowListView and AnomaliesView components","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-2cq","depends_on_id":"langley-5yh","type":"blocks","created_at":"2026-01-31T18:02:12.7112711-05:00","created_by":"unknown"}]}
{"id":"langley-2eg","title":"STYLE-GUIDE vs CSS: Design Tokens section (line 12-28) lists 13 tokens; CSS defines 13 matching tokens plus --accent-hover. --accent-hover is MISSING from the style-guide token list but is used in CSS.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:19:33.6990751-05:00","updated_at":"2026-01-31T02:25:40.080674-05:00","closed_at":"2026-01-31T02:25:40.080674-05:00"}
{"id":"langley-2fa","title":"SSE events fail to save: FOREIGN KEY constraint failed","description":"When proxying streaming responses, SSE events fail to save with foreign key constraint error.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T11:59:01.6000636-05:00","updated_at":"2026-01-25T13:58:11.3319491-05:00","closed_at":"2026-01-25T13:25:00-05:00","labels":["bug"]}
{"id":"langley-2kp","title":"Export UI: Frontend export button in Flows view","description":"Add export UI to the Flows view in the dashboard.\n\n- Export button/dropdown in Flows view toolbar\n- Format selection (JSON/NDJSON/CSV)\n- Include bodies toggle/checkbox\n- Triggers download via window.location or fetch+Blob\n- Passes current filter state to export endpoint\n\n~50 LOC frontend. Depends on langley-3d4 and langley-boc.\n\nRef: .docs/spikes/export-flows.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T10:56:33.7833154-05:00","updated_at":"2026-01-25T13:58:35.6859612-05:00","closed_at":"2026-01-25T13:58:35.6859612-05:00","close_reason":"Added export dropdown with confirmation dialog in frontend","labels":["frontend","phase2"],"dependencies":[{"issue_id":"langley-2kp","depends_on_id":"langley-boc","type":"blocks","created_at":"2026-01-25T10:57:22.63123-05:00","created_by":"unknown"}]}
{"id":"langley-2li","title":"2.4.7: Implement keyboard shortcuts","description":"Implement keyboard shortcuts per .docs/spikes/keyboard-shortcuts.md:\n- j/k for list navigation with selectedIndex state\n- / focuses search\n- Escape closes panels\n- ? shows help modal\n- 1-6 switches views\n- ARIA listbox pattern for accessibility\n- Vanilla React (no library)\n- ~150 LOC\n\nFollows from research in langley-ewr.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T07:40:51.8344266-05:00","updated_at":"2026-01-25T10:29:45.7671362-05:00","closed_at":"2026-01-25T10:29:45.7671362-05:00","close_reason":"Closed","labels":["frontend","phase2"]}
{"id":"langley-2lz","title":"3.1.1 UX Review: Global features (auth, keyboard, theme, WebSocket)","description":"Verify global/cross-cutting features:\n\nG1: Auth - token entry (valid → loads, invalid → error)\nG2: Theme toggle (switches, persists on reload)\nG3: Keyboard j/k navigation (up/down in lists, boundary behavior)\nG4: Keyboard / focus search (focuses host filter from any view)\nG5: Keyboard 1-6 view switch (works from any view)\nG6: Keyboard Enter select (opens detail/drills down)\nG7: Keyboard Esc close (closes detail panel)\nG8: WebSocket live updates (new flow appears, reconnect after disconnect)\nG9: Help overlay ? (shows shortcuts, Esc closes)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:48:18.3458019-05:00","updated_at":"2026-01-25T18:37:20.7951648-05:00","closed_at":"2026-01-25T18:37:20.7951648-05:00"}
{"id":"langley-2qj","title":"Windows: TLS revocation check fails for dynamic certs","description":"On Windows, clients using Schannel (native TLS) fail to connect through the proxy.\n\n**Symptoms:**\n- curl: explicit error `CRYPT_E_NO_REVOCATION_CHECK (0x80092012)`\n- Claude CLI: hangs silently (may be same root cause, unconfirmed)\n\n**Workaround:**\n- curl: `--ssl-no-revoke` flag works\n- Claude CLI: unknown\n\n**Likely cause:**\nLangley's dynamically generated certificates lack CRL Distribution Points and OCSP responder extensions. Windows Schannel requires these for revocation checking.\n\n**Potential fixes:**\n1. Add CRL/OCSP extensions to generated certs (complex)\n2. Document workaround for Windows users\n3. Investigate if there's a way to mark certs as \"no revocation check needed\"\n\n**Repro:**\n```powershell\ncertutil -addstore -f \"ROOT\" $env:APPDATA\\langley\\certs\\ca.crt\n$env:HTTPS_PROXY=\"http://localhost:9090\"\ncurl -x http://localhost:9090 https://httpbin.org/get  # fails\ncurl --ssl-no-revoke -x http://localhost:9090 https://httpbin.org/get  # works\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T11:43:46.981432-05:00","updated_at":"2026-01-25T11:58:46.5163689-05:00","closed_at":"2026-01-25T11:58:46.5163689-05:00","close_reason":"Fixed by adding CRL Distribution Point to generated certs and serving CRL at /crl/ca.crl","labels":["bug","windows"]}
{"id":"langley-2rw","title":"STYLE-GUIDE AUDIT: --border token not listed in style-guide but exists in CSS (dark=#ffffff, light=#d0d0d4) - WAIT: it IS listed on line 28. Disregard.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:19:27.841071-05:00","updated_at":"2026-01-31T02:19:49.6427427-05:00","closed_at":"2026-01-31T02:19:49.6427427-05:00"}
{"id":"langley-353","title":"Security refinements: require redactor, add api-key header","description":"Two actionable security items from spot-check: (1) SEC-2: When p.redactor is nil (mitm.go:238-244, 322-329), raw credentials are stored in DB unredacted. Make redactor a required dependency â€” panic or error if nil. Production code always creates one, but this is a defense-in-depth gap. (2) SEC-10: Default AlwaysRedactHeaders (config.go:115-121) includes x-api-key but not api-key (no x- prefix). Azure OpenAI uses api-key. Test config includes it but default config doesn't. Small fix, real coverage gap. Full security report has 10 items total, these two are most actionable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T16:55:32.52729-05:00","updated_at":"2026-01-31T17:35:47.4331388-05:00","closed_at":"2026-01-31T17:15:07.539273-05:00","labels":["security"]}
{"id":"langley-3d4","title":"Export API: Core endpoint with NDJSON streaming","description":"Implement GET /api/flows/export with NDJSON streaming.\n\n- Add export handler in internal/api/api.go\n- NDJSON streaming writer (primary format for large exports)\n- Reuse existing ListFlows with pagination/batching\n- Summary fields only (no bodies)\n- Response headers: Content-Type, Content-Disposition, X-Export-Row-Count\n- Reuse existing filter params (host, task_id, model, start_time, end_time)\n\n~150 LOC. Foundation for Tasks 2 and 3.\n\nRef: .docs/spikes/export-flows.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T10:56:10.5866389-05:00","updated_at":"2026-01-25T11:43:28.6178606-05:00","closed_at":"2026-01-25T11:43:28.6178606-05:00","close_reason":"Implemented GET /api/flows/export with NDJSON streaming. Tested and working.","labels":["api","phase2"]}
{"id":"langley-3i2","title":"UX: Stat card labels lack units and context","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:42.1545044-05:00","updated_at":"2026-01-30T07:06:42.1545044-05:00","labels":["information","ux-audit"]}
{"id":"langley-3kh","title":"STYLE-GUIDE vs CSS: Input/Select section claims 'Background: --bg-primary' - .filters input/.filters select do use --bg-primary (line 214). Accurate. But 'Focus: border changes to --accent' - focus uses outline:none with border-color change. The outline:none WITHOUT a visible replacement ring violates the style-guide's own 'visible focus ring for all controls' rule (line 53).","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T02:22:33.1776977-05:00","updated_at":"2026-01-31T02:55:06.0226786-05:00","closed_at":"2026-01-31T02:55:06.0226786-05:00","close_reason":"Closed"}
{"id":"langley-3ux","title":"LOW: HTTP/1.1 server timeouts disabled (timeout=0) creates connection exhaustion risk","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:22:07.8190681-05:00","updated_at":"2026-01-24T18:45:16.4533752-05:00","closed_at":"2026-01-24T18:45:16.4533752-05:00","close_reason":"By design. Read/Write timeouts disabled for SSE streaming (LLM responses can take minutes). IdleTimeout=120s handles orphaned connections. Comment in proxy.go:73 explains rationale."}
{"id":"langley-3wi","title":"TLS unit tests","description":"Add comprehensive unit tests for internal/tls/ package.\n\n## Context\nThe TLS package has ZERO test coverage. This is critical - it handles CA creation, certificate signing for MITM proxy, and caching.\n\n## Acceptance Criteria\n- [ ] TestLoadOrCreateCA_CreatesNew - creates CA when none exists\n- [ ] TestLoadOrCreateCA_LoadsExisting - loads CA from disk\n- [ ] TestCA_CertPEM_Format - validates PEM encoding\n- [ ] TestCertCache_GetCertificate_Cached - cache hit behavior\n- [ ] TestCertCache_GetCertificate_Generated - cache miss generates cert\n- [ ] TestCertCache_LRU_Eviction - evicts oldest when full\n- [ ] TestCertCache_ThreadSafety - concurrent access with -race\n- [ ] TestGenerateRandomSerial_NotPredictable - serial randomness\n- [ ] TestCRL_DER_Format - Windows CRL generation\n\n## Files\n- internal/tls/ca.go (244 lines)\n- internal/tls/certcache.go (187 lines)\n- NEW: internal/tls/tls_test.go","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:03.3454162-05:00","updated_at":"2026-01-27T06:38:38.7457175-05:00","closed_at":"2026-01-27T06:38:38.7457175-05:00","close_reason":"Closed"}
{"id":"langley-42u","title":"Add accessible labels to all form inputs","description":"Host filter, task ID filter, status select, and export select all lack labels or aria-label. Style guide explicitly requires: 'All form inputs have a visible label or aria-label.' Screen readers cannot identify these controls. Related existing beads: langley-5x9 (clear button), langley-g2g (export label). This bead covers the aria-label/label requirement specifically. App.tsx lines 593-621. QA audit ref: P1-12.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:54:17.701476-05:00","updated_at":"2026-01-31T17:35:47.4366671-05:00","closed_at":"2026-01-31T17:15:07.539273-05:00","labels":["accessibility","ux"]}
{"id":"langley-4fa","title":"LOW: Langley design lacks input validation specs for config file parsing","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:22:14.695628-05:00","updated_at":"2026-01-24T18:45:22.6759727-05:00","closed_at":"2026-01-24T18:45:22.6759727-05:00","close_reason":"Not needed. Config uses strict YAML parsing with typed structs (internal/config/config.go). Invalid fields cause parse errors. Default values are safe."}
{"id":"langley-4m0","title":"2.3.2: Bedrock provider","description":"Implement AWS Bedrock provider.\n\nDetection: bedrock-runtime.*.amazonaws.com\n\nUsage parsing:\n- Wrapped in Bedrock envelope\n- inputTokenCount, outputTokenCount\n- Model ID in different location\n\nPricing: Claude via Bedrock rates (different from direct API)\n\nBlocked by: langley-vdn (base abstraction)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T01:03:52.5566079-05:00","updated_at":"2026-01-25T07:30:11.4697331-05:00","closed_at":"2026-01-25T07:30:11.4697331-05:00","close_reason":"Bedrock provider implemented. Supports Converse API, InvokeModel API, and Claude passthrough formats. Regional endpoint detection. Tests passing.","labels":["phase2","provider"]}
{"id":"langley-4q7","title":"CI/CD GitHub Actions workflow","description":"Add GitHub Actions for automated testing.\n\n## Triggers\n- Push to main\n- Pull requests to main\n\n## Jobs\n\n### Test (Go)\n- Setup Go\n- Run `make check` (lint + test with -race)\n- Upload coverage report\n\n### Test (Frontend)\n- Setup Node.js\n- Install deps (`npm ci`)\n- Run Playwright tests\n\n### Build (optional)\n- Verify `go build` succeeds\n- Don't upload artifacts (that's Phase 5 release)\n\n## Acceptance Criteria\n- [ ] Workflow file: .github/workflows/ci.yml\n- [ ] Go tests run on ubuntu-latest\n- [ ] Playwright tests run (may need browser install step)\n- [ ] Status checks visible on PRs\n- [ ] Badge in README (optional)\n\n## Files\n- NEW: .github/workflows/ci.yml\n- README.md (badge)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:34:31.4722615-05:00","updated_at":"2026-01-29T04:49:16.5852734-05:00","closed_at":"2026-01-27T07:00:00-05:00"}
{"id":"langley-4ty","title":"BREAKING-CHANGE: LANGLEY_AUTH_TOKEN env var interaction unclear","description":"Phase 3.3 says 'Existing LANGLEY_AUTH_TOKEN env var still works as override for automation'. Unclear:\\n1. If env var set, does OAuth flow still work?\\n2. Can both auth methods coexist?\\n3. What takes precedence - env token or OAuth access_token?\\n4. How does 'automation' scenario differ from dashboard scenario?","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:38:54.7956328-05:00","updated_at":"2026-01-25T17:20:46.0691239-05:00","closed_at":"2026-01-25T17:20:46.0691239-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-4vz","title":"HIGH: Request body fully buffered before proxy - memory exhaustion with large uploads","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:20:11.1519461-05:00","updated_at":"2026-01-24T18:39:28.8113283-05:00","closed_at":"2026-01-24T18:39:28.8113283-05:00","close_reason":"Mitigated. Body buffering is limited by BodyMaxBytes (default 1MB) via io.LimitReader in mitm.go:177,405. Memory exhaustion prevented by size cap."}
{"id":"langley-4x4","title":"Accessibility: keyboard roles, focus traps, ARIA","description":"Accessibility gaps beyond the P1 label issues: (1) Task/tool table rows have onClick+cursor:pointer but no role, tabIndex, or aria-selected — unlike flow list which does this correctly (P2-13, overlaps langley-ra2). (2) Flow detail close button uses 'x' with no aria-label (P2-14). (3) Export modal has no focus trap, no role=dialog, no aria-modal=true — unlike help modal which does all three correctly (P2-15). (4) Anomaly badge count not labeled for screen readers (P3-16). (5) Theme toggle lacks aria-label (P3-17). QA audit ref: P2-13 through P3-17.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:54:59.6017629-05:00","updated_at":"2026-01-31T16:54:59.6017629-05:00","labels":["accessibility","ux"]}
{"id":"langley-4z1m","title":"View request/response bodies in Flows tab","description":"The proxy captures request and response bodies (when raw_body_storage is enabled) but there is no UI to view them. Add a body viewer to the flow detail panel — syntax-highlighted JSON, with collapse/expand for large payloads.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-01T12:27:30.2860544-05:00","updated_at":"2026-02-01T12:27:30.2860544-05:00","labels":["feature","flows"]}
{"id":"langley-549","title":"Frontend dev server cannot be gracefully stopped on Windows","description":"When running 'make dev-frontend' on Windows, the Vite dev server cannot be stopped with Ctrl+C. The terminal shows 'Terminate batch job (Y/N)?' but answering Y does not cleanly stop it - the terminal becomes unresponsive and must be force killed.\n\nThis happens because:\n1. Make spawns a subprocess for npm/vite\n2. Ctrl+C signal handling on Windows does not propagate cleanly to child processes\n3. The terminal gets into a bad state after the parent process exits\n\nRepro:\n1. Run 'make dev-frontend'\n2. Press Ctrl+C\n3. Answer Y to 'Terminate batch job'\n4. Terminal becomes unresponsive, must close and reopen","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T12:58:54.8319193-05:00","updated_at":"2026-01-25T14:26:52.9769057-05:00","closed_at":"2026-01-25T14:26:52.9769057-05:00","close_reason":"Added make stop workaround - Windows make doesn't propagate Ctrl+C"}
{"id":"langley-561","title":"STYLE-GUIDE vs CSS: error-banner uses hardcoded rgba(239,68,68,0.1) instead of using var(--error) with opacity. This bypasses tokens and will not adapt if --error token changes.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:23:22.9077449-05:00","updated_at":"2026-01-31T07:40:53.7245339-05:00","closed_at":"2026-01-31T07:40:53.7245339-05:00","close_reason":"Fixed: replaced hardcoded --error-bg token values with color-mix(in srgb, var(--error) 10%, transparent) so it auto-derives from --error in both themes."}
{"id":"langley-5i2","title":"feat: langley run command for zero-config agent startup","description":"Add a `run` subcommand to Langley that spawns a child process with all proxy environment variables pre-configured. Eliminates the manual copy/paste step when starting agents.\n\n## Before\n```\nlangley                    # Start server\n# Copy env vars from banner\n$env:HTTPS_PROXY = \"...\"   # Paste in new terminal\nclaude                     # Start agent\n```\n\n## After\n```\nlangley                    # Start server (terminal 1)\nlangley run claude         # Start agent with auto-configured env (terminal 2)\n```\n\n## Design\nFull plan: `.docs/plans/feat-langley-run-command.md` (v3)\nReview notes: `.docs/plans/review.md`\n\n## Scope\n1. State file infrastructure (state.go)\n2. Run command interfaces + orchestration (run.go)\n3. Platform signal handling (run_unix.go, run_windows.go)\n4. Main.go integration (command switch, state lifecycle)\n5. Unit tests (run_test.go)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-29T04:50:38.9556862-05:00","updated_at":"2026-01-31T01:45:17.1182503-05:00","closed_at":"2026-01-31T01:45:17.1182503-05:00","close_reason":"Closed","labels":["feature"]}
{"id":"langley-5i2.1","title":"State file infrastructure (state.go)","description":"Create `cmd/langley/state.go` with ServerState struct and FileStateStore for reading/writing server state to disk.\n\n## Context\n`langley run` needs to discover the running server's addresses. The server writes state on startup; `langley run` reads it. State file location: `~/.config/langley/state.json` (Unix) or `%APPDATA%\\langley\\state.json` (Windows).\n\n## Implementation\n\n### ServerState struct\n```go\ntype ServerState struct {\n    ProxyAddr string    `json:\"proxy_addr\"`\n    APIAddr   string    `json:\"api_addr\"`\n    CAPath    string    `json:\"ca_path\"`\n    PID       int       `json:\"pid\"`\n    StartedAt time.Time `json:\"started_at\"`\n}\n```\n\n### FileStateStore\nImplements both StateReader and StateWriter interfaces (defined in run.go bead).\n\n### CRITICAL details from review\n\n1. **Use `config.ConfigDir()`** (exported, from `internal/config`), NOT `configDir()` (does not exist in this package). Must import `langley/internal/config`.\n\n2. **Sentinel error**: `Read()` returns `ErrServerNotRunning` (a package-level `var`), NOT a formatted multi-line string. The call site in `Execute()` formats the user-facing message. This prevents double-wrapping: `Error: Langley server is not running...` instead of `Error: Error: Langley server is not running...`.\n\n3. **State validation**: `Read()` must reject state with empty `proxy_addr` or `api_addr`. Otherwise health check connects to `http:///api/health` — confusing error.\n\n4. **Atomic writes (Windows-safe)**: `Write()` must `os.Remove(s.path)` BEFORE `os.Rename(tmpPath, s.path)`. On Windows, `os.Rename` fails if destination exists. Without this, every write after the first will fail.\n\n5. **Directory creation**: `Write()` calls `os.MkdirAll(dir, 0700)` before writing.\n\n6. **Delete is idempotent**: `Delete()` returns nil if file already gone.\n\n## Files\n- `cmd/langley/state.go` (NEW, ~80 lines)","acceptance_criteria":"- [ ] ServerState struct with json tags: proxy_addr, api_addr, ca_path, pid, started_at\n- [ ] FileStateStore uses config.ConfigDir() (NOT configDir) with proper import\n- [ ] ErrServerNotRunning sentinel error (var, not formatted string)\n- [ ] Read() returns ErrServerNotRunning when file missing (os.IsNotExist)\n- [ ] Read() returns error for malformed JSON\n- [ ] Read() validates proxy_addr and api_addr are non-empty\n- [ ] Write() creates parent directory with 0700 permissions\n- [ ] Write() uses atomic temp-file + rename pattern\n- [ ] Write() calls os.Remove before os.Rename (Windows compatibility)\n- [ ] Delete() returns nil if file already gone (idempotent)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T04:53:04.1416944-05:00","updated_at":"2026-01-31T01:44:49.0454272-05:00","closed_at":"2026-01-31T01:44:49.0454272-05:00","close_reason":"Closed","labels":["feature","run-command"],"dependencies":[{"issue_id":"langley-5i2.1","depends_on_id":"langley-5i2","type":"parent-child","created_at":"2026-01-29T04:53:04.1428812-05:00","created_by":"unknown"}]}
{"id":"langley-5i2.2","title":"Run command interfaces and orchestration (run.go)","description":"Create `cmd/langley/run.go` with all interfaces, the RunCommand orchestrator, and concrete implementations.\n\n## Interfaces (define in consumer package)\n\n```\nStateReader   - Read() (*ServerState, error)\nStateWriter   - Write(state ServerState) error; Delete() error\nHealthChecker - Check(ctx context.Context, apiAddr string) error\nEnvBuilder    - Build(proxyAddr, caPath string) []string\nProcessRunner - Run(ctx context.Context, command string, args []string, env []string) (exitCode int)\nFileChecker   - Exists(path string) bool\n```\n\n## RunCommand.Execute flow\n\n1. No args → print usage, return 1\n2. Read state → on ErrServerNotRunning, print friendly multi-line message at THIS layer (not from Read)\n3. Health check → GET `http://{api_addr}/api/health` with 2s context timeout\n4. Verify CA exists → clear error with path\n5. Build env → spawn subprocess\n\n## CRITICAL details from review\n\n1. **Health endpoint is `/api/health`** (existing, unauthenticated at `internal/api/api.go:103`). Do NOT create a new `/health` endpoint. The plan originally had the wrong path.\n\n2. **Sentinel error handling**: `Execute()` checks `errors.Is(err, ErrServerNotRunning)` and prints the friendly message itself. Other errors print `Error: \u003cerr\u003e`. This prevents the double-wrap bug.\n\n3. **Case-insensitive env dedup**: `ProxyEnvBuilder.Build()` must use `strings.ToUpper()` for the filter map. On Windows, `os.Environ()` preserves original casing (e.g., `Https_Proxy`) but env vars are case-insensitive. A case-sensitive map lookup would miss these, leaving duplicate keys.\n\n4. **Override list**: HTTPS_PROXY, https_proxy, HTTP_PROXY, http_proxy, NODE_EXTRA_CA_CERTS, SSL_CERT_FILE, REQUESTS_CA_BUNDLE. Both upper and lowercase proxy vars for curl/wget/Python compatibility.\n\n5. **NO_PROXY preserved**: The filter only removes keys in the override map. NO_PROXY/no_proxy pass through untouched.\n\n## Concrete implementations\n- HTTPHealthChecker: uses `http.NewRequestWithContext` for cancellation\n- ProxyEnvBuilder: case-insensitive dedup + both-case proxy vars\n- OSFileChecker: `os.Stat`\n- ExecProcessRunner: delegates to platform-specific `runProcess()`\n- handleRunCommand: entry point from main, creates with prod deps, calls os.Exit\n\n## Files\n- `cmd/langley/run.go` (NEW, ~200 lines)","acceptance_criteria":"- [ ] All 6 interfaces defined with correct signatures (context.Context on I/O methods)\n- [ ] RunCommand struct accepts all deps via injection + io.Writer for stderr\n- [ ] NewRunCommand() wires production implementations\n- [ ] Execute() prints usage on no args (exit 1)\n- [ ] Execute() checks errors.Is(err, ErrServerNotRunning) for friendly message\n- [ ] Execute() does NOT double-wrap error messages (no 'Error: Error:' output)\n- [ ] HTTPHealthChecker hits /api/health (NOT /health)\n- [ ] HTTPHealthChecker uses http.NewRequestWithContext for timeout\n- [ ] ProxyEnvBuilder sets all 7 override vars (both cases for proxy)\n- [ ] ProxyEnvBuilder uses strings.ToUpper for case-insensitive dedup\n- [ ] ProxyEnvBuilder preserves NO_PROXY/no_proxy (not in override list)\n- [ ] ExecProcessRunner delegates to runProcess() (platform-specific)\n- [ ] getExitCode() extracts exit code from exec.ExitError","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T04:53:45.1456507-05:00","updated_at":"2026-01-31T01:44:54.6646238-05:00","closed_at":"2026-01-31T01:44:54.6646238-05:00","close_reason":"Closed","labels":["feature","run-command"],"dependencies":[{"issue_id":"langley-5i2.2","depends_on_id":"langley-5i2","type":"parent-child","created_at":"2026-01-29T04:53:45.1467478-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.2","depends_on_id":"langley-5i2.1","type":"blocks","created_at":"2026-01-29T04:53:45.1478457-05:00","created_by":"unknown"}]}
{"id":"langley-5i2.3","title":"Platform signal handling (run_unix.go, run_windows.go)","description":"Create platform-specific process runners with proper signal handling.\n\n## run_unix.go (build tag: !windows)\n\n### Process groups\n- Child spawned in its own process group (`Setpgid: true`)\n- Parent forwards SIGINT/SIGTERM/SIGHUP to child's process group (negative PID: `syscall.Kill(-cmd.Process.Pid, sig)`)\n- This prevents double-signal delivery: without Setpgid, the TTY sends Ctrl+C to BOTH parent and child, and then the parent also forwards — child gets signal twice\n\n### Signal loop\n- `signal.Notify` for SIGINT, SIGTERM, SIGHUP\n- Select loop: forward signals or return exit code when child exits\n- `defer signal.Stop(sigChan)` for cleanup\n\n## run_windows.go (build tag: windows)\n\n### Ctrl+C behavior\n- On Windows, Ctrl+C is automatically forwarded to child processes in the same console\n- Parent intercepts signal, waits up to 5s for child to handle it\n- After 5s timeout: `cmd.Process.Kill()` then WAIT on waitCh before returning\n\n### CRITICAL: Kill timeout must wait\nThe plan originally had a bug: after `Process.Kill()`, execution fell through the select without waiting for the child to actually exit. This leaks processes. Fix: `err := \u003c-waitCh` after Kill().\n\n## CRITICAL: Print Start() errors (both platforms)\nBoth files must print the error if `cmd.Start()` fails. The original plan silently returned exit code 1 — user sees nothing when command is not found. Fix: `fmt.Fprintf(os.Stderr, \"Error: failed to start %%q: %%v\\n\", cmd.Path, err)`\n\n## Files\n- `cmd/langley/run_unix.go` (NEW, ~50 lines)\n- `cmd/langley/run_windows.go` (NEW, ~45 lines)","acceptance_criteria":"- [ ] run_unix.go has //go:build !windows tag\n- [ ] run_windows.go has //go:build windows tag\n- [ ] Unix: child spawned with Setpgid: true (own process group)\n- [ ] Unix: signals forwarded to negative PID (process group, not just child)\n- [ ] Unix: forwards SIGINT, SIGTERM, SIGHUP\n- [ ] Unix: prints error on cmd.Start() failure (not silent exit 1)\n- [ ] Windows: waits for child to handle Ctrl+C (auto-forwarded by console)\n- [ ] Windows: 5-second timeout before force kill\n- [ ] Windows: waits on waitCh AFTER Process.Kill() (no process leak)\n- [ ] Windows: prints error on cmd.Start() failure (not silent exit 1)\n- [ ] Both: return child's exit code via getExitCode()","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:01:40.2102044-05:00","updated_at":"2026-01-31T01:45:00.2596216-05:00","closed_at":"2026-01-31T01:45:00.2596216-05:00","close_reason":"Closed","labels":["feature","run-command"],"dependencies":[{"issue_id":"langley-5i2.3","depends_on_id":"langley-5i2","type":"parent-child","created_at":"2026-01-29T05:01:40.2108656-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.3","depends_on_id":"langley-5i2.2","type":"blocks","created_at":"2026-01-29T05:01:40.2124585-05:00","created_by":"unknown"}]}
{"id":"langley-5i2.4","title":"Main.go integration for langley run","description":"Wire the run command, state file lifecycle, and command dispatch into main.go.\n\n## Changes to cmd/langley/main.go\n\n### 1. Command switch (~line 45)\nAdd `run` case alongside existing `token` and `setup`:\n```go\ncase \"run\":\n    handleRunCommand(os.Args[2:])\n    return\n```\n\n### 2. State file write — TIMING IS CRITICAL\nWrite state AFTER the `apiSrv.Serve(apiListener)` goroutine is launched (around line 255), NOT after listener bind (line 153).\n\n**Why**: Listeners bind at line 153 (`listenWithFallback`) but `Serve()` starts later. If state is written after bind but before Serve, `langley run` reads state, health-checks `/api/health`, and gets connection refused because nobody is calling `Accept()` yet.\n\nWriting after the Serve goroutine launches is safe: the goroutine will be scheduled and accepting connections before any external process can read the file, resolve DNS, and connect.\n\n```go\nstateStore, err := NewFileStateStore()\nif err != nil {\n    slog.Warn(\"failed to create state store\", \"error\", err)\n} else {\n    if err := stateStore.Write(ServerState{\n        ProxyAddr: actualProxyAddr,\n        APIAddr:   actualAPIAddr,\n        CAPath:    caPath,\n        PID:       os.Getpid(),\n        StartedAt: time.Now(),\n    }); err != nil {\n        slog.Warn(\"failed to write state file\", \"error\", err)\n    }\n}\n```\n\n### 3. State file delete on shutdown\nIn the shutdown handler (around line 338), delete state best-effort:\n```go\nif stateStore != nil {\n    stateStore.Delete()\n}\n```\n\nUse the same `stateStore` instance — no bare `writeState()`/`deleteState()` functions.\n\n### 4. NO new /health endpoint\nThe existing `GET /api/health` in `internal/api/api.go:103` is already unauthenticated and sufficient. Do not add a duplicate.\n\n## Files\n- `cmd/langley/main.go` (MODIFY, ~20 lines added)","acceptance_criteria":"- [ ] 'run' case added to command switch (alongside 'token', 'setup')\n- [ ] handleRunCommand(os.Args[2:]) called with remaining args\n- [ ] State file written AFTER apiSrv.Serve() goroutine launch (NOT after listener bind)\n- [ ] State includes actualProxyAddr, actualAPIAddr, caPath, PID, time.Now()\n- [ ] State write failure is slog.Warn (non-fatal)\n- [ ] State deleted on shutdown (best effort, in shutdown handler)\n- [ ] Uses stateStore instance for both write and delete (not bare functions)\n- [ ] No new /health endpoint added (uses existing /api/health)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:14:47.000885-05:00","updated_at":"2026-01-31T01:45:05.9118815-05:00","closed_at":"2026-01-31T01:45:05.9118815-05:00","close_reason":"Closed","labels":["feature","run-command"],"dependencies":[{"issue_id":"langley-5i2.4","depends_on_id":"langley-5i2","type":"parent-child","created_at":"2026-01-29T05:14:47.0015626-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.4","depends_on_id":"langley-5i2.1","type":"blocks","created_at":"2026-01-29T05:14:47.0040515-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.4","depends_on_id":"langley-5i2.2","type":"blocks","created_at":"2026-01-29T05:14:47.0051886-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.4","depends_on_id":"langley-5i2.3","type":"blocks","created_at":"2026-01-29T05:14:47.0068704-05:00","created_by":"unknown"}]}
{"id":"langley-5i2.5","title":"Unit tests for langley run (run_test.go)","description":"Create comprehensive unit tests for all run command components.\n\n## Test doubles\nMock implementations for all 5 injected interfaces:\n- mockStateReader (state, err)\n- mockHealthChecker (err)\n- mockEnvBuilder (env)\n- mockFileChecker (exists)\n- mockProcessRunner (exitCode)\n\n## RunCommand.Execute tests\n\n| Test | Setup | Assertion |\n|------|-------|-----------|\n| No args | empty args | exit 1, stderr contains 'Usage:' |\n| State read error | stateReader returns error | exit 1 |\n| Server not running | stateReader returns ErrServerNotRunning | exit 1, friendly multi-line message (no 'Error: Error:' double-wrap) |\n| Health check fails | healthChecker returns error | exit 1, 'not responding' in stderr |\n| CA missing | fileChecker.Exists returns false | exit 1, 'CA certificate not found' with path |\n| Success | all pass, exitCode 0 | exit 0 |\n| Exit code propagation | processRunner returns 42 | exit 42 |\n\n## ProxyEnvBuilder tests\n\n| Test | Setup | Assertion |\n|------|-------|-----------|\n| Deduplication | t.Setenv(\"HTTPS_PROXY\", \"old\") | exactly 1 HTTPS_PROXY with new value |\n| Both cases | default env | both HTTPS_PROXY and https_proxy present |\n| All vars present | default env | all 7 override vars in output |\n| NO_PROXY preserved | t.Setenv(\"NO_PROXY\", \"localhost\") | NO_PROXY still in env, unchanged |\n\n## FileStateStore tests (if feasible without real FS)\nConsider t.TempDir() for:\n- Read missing file → ErrServerNotRunning\n- Read malformed JSON → error\n- Read valid state → correct struct\n- Read empty proxy_addr → error\n- Write + Read roundtrip → same data\n- Write to existing file works (Windows rename)\n- Delete missing file → nil (idempotent)\n\n## Files\n- \\ (NEW, ~200 lines)","acceptance_criteria":"- [ ] Test doubles for all 5 interfaces (StateReader, HealthChecker, EnvBuilder, FileChecker, ProcessRunner)\n- [ ] Test: no args → exit 1 with usage\n- [ ] Test: state read error → exit 1\n- [ ] Test: ErrServerNotRunning → friendly message without 'Error: Error:' double-wrap\n- [ ] Test: health check fail → exit 1 with 'not responding'\n- [ ] Test: CA missing → exit 1 with path in message\n- [ ] Test: success → exit 0\n- [ ] Test: exit code 42 propagated\n- [ ] Test: ProxyEnvBuilder dedup (existing HTTPS_PROXY replaced, not duplicated)\n- [ ] Test: ProxyEnvBuilder both cases (HTTPS_PROXY and https_proxy)\n- [ ] Test: FileStateStore read missing → ErrServerNotRunning\n- [ ] Test: FileStateStore read malformed → error\n- [ ] Test: FileStateStore read empty fields → error\n- [ ] Test: FileStateStore write + read roundtrip\n- [ ] All tests pass with -race flag","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T05:21:11.5765587-05:00","updated_at":"2026-01-31T01:45:11.5146187-05:00","closed_at":"2026-01-31T01:45:11.5146187-05:00","close_reason":"Closed","labels":["feature","run-command","testing"],"dependencies":[{"issue_id":"langley-5i2.5","depends_on_id":"langley-5i2","type":"parent-child","created_at":"2026-01-29T05:21:11.577672-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.5","depends_on_id":"langley-5i2.1","type":"blocks","created_at":"2026-01-29T05:21:11.5798412-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.5","depends_on_id":"langley-5i2.2","type":"blocks","created_at":"2026-01-29T05:21:11.5814764-05:00","created_by":"unknown"},{"issue_id":"langley-5i2.5","depends_on_id":"langley-5i2.3","type":"blocks","created_at":"2026-01-29T05:21:11.5825093-05:00","created_by":"unknown"}]}
{"id":"langley-5m7","title":"3.3 Token UX: Origin + Cookie auth","description":"Replace manual token copy/paste with automatic Origin + Cookie auth.\n\nDesign:\n1. Check Origin header is localhost (http://localhost:*, http://127.0.0.1:*)\n2. If no origin (non-browser): require Authorization header (CLI/automation)\n3. If valid origin + no cookie: set HTTP-only session cookie, process request\n4. If valid origin + valid cookie: process request\n\nCookie spec:\n- Name: langley_session\n- HttpOnly: true\n- Secure: false (localhost)\n- SameSite: Strict\n- Path: /\n\nSecurity layers:\n- Layer 1: Origin header must be localhost\n- Layer 2: Valid session cookie required\n- Layer 3: HTTP-only prevents XSS\n- Layer 4: SameSite=Strict prevents CSRF\n- Automation: Authorization: Bearer \u003cLANGLEY_AUTH_TOKEN\u003e still works\n\nAcceptance:\n- [ ] Non-localhost origins rejected with 401\n- [ ] First localhost request auto-sets HTTP-only cookie\n- [ ] Subsequent requests authenticated via cookie\n- [ ] No JavaScript token handling in dashboard\n- [ ] No manual token copy/paste required\n- [ ] LANGLEY_AUTH_TOKEN header still works for CLI/automation\n- [ ] WebSocket auth updated to use same mechanism\n- [ ] Playwright test for auth flow","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T17:22:04.241668-05:00","updated_at":"2026-01-25T18:02:30.0549771-05:00","closed_at":"2026-01-25T18:02:30.0549771-05:00","close_reason":"Implemented Origin + Cookie auth. Zero manual token handling required for browser access."}
{"id":"langley-5np","title":"UX: Tasks view uses listbox role on tabular data — ARIA semantic conflict","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:04:31.3760195-05:00","updated_at":"2026-01-31T07:13:23.9103039-05:00","closed_at":"2026-01-31T07:13:23.9103039-05:00","close_reason":"Removed role=listbox/option from Tasks and Tools tables — native table semantics are correct","labels":["accessibility","ux-audit"]}
{"id":"langley-5rq7","title":"Non-Node clients fail SSL through proxy (git, curl, pip)","description":"When HTTPS_PROXY is set to route traffic through Langley, non-Node.js clients (git, curl, pip) fail with SSL certificate errors. NODE_EXTRA_CA_CERTS only covers Node.js clients — everything else rejects the MITM cert.\n\n## Research\n\nSee .docs/git-ssl-debug.md for full trace, evidence, and fix options.\n\n## Summary\n\n- HTTPS_PROXY=http://localhost:9090 routes all HTTPS through Langley\n- NODE_EXTRA_CA_CERTS tells Node.js to trust the Langley CA\n- Git, curl, pip etc. honor HTTPS_PROXY but ignore NODE_EXTRA_CA_CERTS\n- TLS handshake fails: unknown CA (560)\n\n## Options to evaluate\n\n1. git config --global http.sslCAInfo pointing to Langley CA\n2. NO_PROXY allowlist for non-LLM hosts\n3. Passthrough allowlist in Langley (relay TLS without MITM for non-LLM hosts)\n4. Pattern-based interception (only MITM known LLM API hosts)\n\nNeeds more research to determine best approach.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-01T11:12:23.2937656-05:00","updated_at":"2026-02-01T12:17:29.1926371-05:00","closed_at":"2026-02-01T12:17:29.1926371-05:00","close_reason":"Implemented: host-based MITM routing with passthrough tunneling, domain suffix matching, intercept_hosts config. Verified via unit tests (63 pass) and manual E2E (git push, LLM traffic)."}
{"id":"langley-5rz","title":"REDACTION: Body redaction regex runs on full body - ReDoS possible with crafted input","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T12:24:55.3876647-05:00","updated_at":"2026-01-24T16:15:18.9547077-05:00","closed_at":"2026-01-24T16:15:18.9547077-05:00","close_reason":"Fixed in Phase 2.2.12 - 1MB input limit"}
{"id":"langley-5un","title":"Add aria-labels to filter inputs and interactive elements","description":"Filter inputs (App.tsx:593-619) use only placeholder text as labels -- no id+label, no aria-label. Style guide requires 'All form inputs have a visible label or aria-label.' Also: flow detail close button (714) lacks aria-label, export modal missing focus trap + role=dialog + aria-modal, task/tool table rows clickable but missing keyboard roles. Ref: QA audit P1-12, P2-13, P2-14, P2-15.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:53:32.0139426-05:00","updated_at":"2026-02-01T08:03:32.1178753-05:00","closed_at":"2026-02-01T08:03:32.1178753-05:00","close_reason":"Closed","labels":["a11y","audit","ux"]}
{"id":"langley-5vhq","title":"Tools tab: add time range selector","description":"The Tools view fetches /api/analytics/tools with no time range params, defaulting to 24h server-side. Other views (stats, daily costs) pass explicit 30-day windows. This causes tools to appear empty when no traffic occurred in the last 24h.\n\n## Scope\n- Add a time range selector UI to the Tools tab (matching existing patterns if any)\n- Pass start/end params from fetchTools() like fetchStats() already does\n- Default to 30 days to match other analytics views\n\n## Context\n- Spike: .docs/spikes/TOOLS.md (finding #1)\n- useApi.ts:34 — fetchTools() sends no params\n- api.go:778 — parseTimeRange() defaults to 24h\n- fetchStats() at useApi.ts:20 already passes 30-day range\n\n## Acceptance Criteria\n- [ ] Tools tab passes explicit time range to /api/analytics/tools\n- [ ] Default range shows 30 days of tool data\n- [ ] User can adjust the time range (or shares a global range selector if one exists)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-01T08:22:13.3055643-05:00","updated_at":"2026-02-01T08:41:45.890492-05:00","closed_at":"2026-02-01T08:41:45.890492-05:00","close_reason":"Closed"}
{"id":"langley-5x9","title":"UX: Filter inputs have no clear/reset button","description":"","status":"in_progress","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:31.0783301-05:00","updated_at":"2026-01-31T13:08:31.6496495-05:00","labels":["discoverability","ux-audit"]}
{"id":"langley-5yh","title":"Extract shared types and utility functions from App.tsx","description":"Move all TypeScript interfaces (Flow, WSMessage, Stats, TaskSummary, ToolStats, Anomaly, CostPeriod, Settings, View) to web/src/types.ts. Move utility functions (formatTime, formatDate, formatCost, formatDuration, getStatusClass, getSeverityClass) and routing constants (VALID_VIEWS, DEFAULT_VIEW, parseHash) to web/src/utils.ts. App.tsx imports from new files.","acceptance_criteria":"- All interfaces live in web/src/types.ts and are exported\n- All format/class helpers live in web/src/utils.ts and are exported\n- App.tsx imports from both new files\n- No inline type definitions remain in App.tsx (except component-local state)\n- make check passes\n- Zero behavior change (pure move refactor)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:52:52.1749739-05:00","updated_at":"2026-01-31T18:41:48.8119237-05:00","closed_at":"2026-01-31T18:41:48.8119237-05:00","close_reason":"Extracted types.ts and utils.ts","labels":["refactor structure"]}
{"id":"langley-6e4","title":"Doc: Playwright test count incorrect (says 34, actual 48)","description":".docs/team_task2.md states '34 tests' but web/tests/dashboard.spec.ts contains 48 test() blocks.\n\nLocation: .docs/team_task2.md:52\n\nFix: Update doc to reflect actual test count.\n\nNote: .docs is gitignored so this is local-only documentation.","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-01-25T15:49:03.3737844-05:00","updated_at":"2026-01-25T16:12:43.7673702-05:00","closed_at":"2026-01-25T16:12:43.7673702-05:00","close_reason":"Closed"}
{"id":"langley-6g7","title":"UX: Detail panel not visible alongside list at 1200px","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:53.1963965-05:00","updated_at":"2026-01-30T07:06:53.1963965-05:00","labels":["responsiveness","ux-audit"]}
{"id":"langley-6m4","title":"AUTH: Auth token logged in debug output (api.go:80) - redact before logging","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T12:24:06.1221673-05:00","updated_at":"2026-01-24T16:14:16.7311496-05:00","closed_at":"2026-01-24T16:14:16.7311496-05:00","close_reason":"Fixed in Phase 2.2.6 - logs only length"}
{"id":"langley-6ne","title":"UX: Help overlay does not trap focus — Tab escapes to page behind","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:04:25.3806278-05:00","updated_at":"2026-01-31T02:14:10.6825276-05:00","closed_at":"2026-01-31T02:14:10.6825276-05:00","close_reason":"Closed","labels":["accessibility","ux-audit"]}
{"id":"langley-6rz","title":"Test fixtures","description":"Create shared test fixtures for consistent, realistic test data.\n\n## Context\nAll test data is currently inline in test files. This leads to:\n- Duplicated mock data across tests\n- Inconsistent test scenarios\n- Hard to maintain realistic edge cases\n\n## Acceptance Criteria\n- [ ] Create testdata/ directory structure\n- [ ] Sample flows (successful, failed, streaming, non-streaming)\n- [ ] Sample SSE event streams (complete conversations)\n- [ ] Sample provider responses (Anthropic, OpenAI, Bedrock, Gemini)\n- [ ] Helper functions to load fixtures in Go tests\n- [ ] Document fixture format and usage\n\n## Structure\n```\ntestdata/\n├── flows/\n│   ├── anthropic_success.json\n│   ├── openai_streaming.json\n│   └── bedrock_error.json\n├── sse/\n│   ├── claude_conversation.txt\n│   └── openai_stream.txt\n└── README.md\n```","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:30.7276046-05:00","updated_at":"2026-01-29T04:49:16.5881655-05:00","closed_at":"2026-01-27T06:57:00-05:00"}
{"id":"langley-6uq","title":"Surface API errors to users instead of silent null","description":"apiFetch() silently returns null on all non-auth errors (404, 500, 502, network failures). Every consumer checks 'if (data)' and does nothing on null. Result: if the API is down, the user sees an empty dashboard with no error message. If a 500 occurs, they see stale data with no indication. Only auth errors (401/403) produce user-visible feedback. Fix: add error state per view or a global error notification system. App.tsx lines 164-177. QA audit ref: P1-08.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:54:01.5465343-05:00","updated_at":"2026-01-31T17:39:55.4258804-05:00","closed_at":"2026-01-31T17:39:55.4258804-05:00","close_reason":"Duplicate of langley-cs4","labels":["errors","ux"]}
{"id":"langley-6uw","title":"3.1.5 UX Review: Tools view","description":"Verify Tools view features:\n\nO1: Tools table (all columns, empty state)\nO2: Success rate color (Green ≥90%, Yellow ≥70%, Red \u003c70%; test 0% and 100%)\nO3: Avg duration (formatted in ms, zero duration)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:49:16.2530181-05:00","updated_at":"2026-01-25T18:45:37.937533-05:00","closed_at":"2026-01-25T18:45:37.937533-05:00","close_reason":"Verified: TO1 working. Tools table renders with empty state (no tool invocations tracked yet). All columns present."}
{"id":"langley-6y3","title":"DESIGN-QUESTION: Why OAuth client credentials over simpler auto-auth?","description":"Current system generates random token on startup. Proposed OAuth adds complexity. Alternative approaches:\\n1. Auto-inject token via HTTP-only cookie set by server\\n2. Use same-origin policy - no auth needed if server binds to localhost only\\n3. Short-lived tokens with auto-refresh via server-set cookie\\n\\nNeed justification for OAuth complexity over simpler alternatives.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:38:42.0282525-05:00","updated_at":"2026-01-25T17:21:18.8101241-05:00","closed_at":"2026-01-25T17:21:18.8101241-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-6yp","title":"Fix Analytics daily cost view","description":"The daily cost view in Analytics is broken and not usable.\n\n## Context\nUser reported daily cost view is broken. Needs investigation.\n\n## Acceptance Criteria\n- [ ] Investigate what's broken (data? rendering? API?)\n- [ ] Fix the issue\n- [ ] Verify daily cost chart displays correctly\n- [ ] Test with real data\n\n## Files\n- web/src/App.tsx (Analytics view component)\n- internal/api/api.go (analytics endpoints)\n- internal/store/sqlite.go (cost aggregation queries)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:20:27.1031247-05:00","updated_at":"2026-01-27T06:27:00.3549629-05:00","closed_at":"2026-01-27T06:27:00.3549629-05:00","close_reason":"Closed"}
{"id":"langley-6z6","title":"Export: JSON exporter buffers all flows in memory (not streaming)","description":"JSONExporter stores all flows in e.flows slice and only writes on WriteFooter(). For large exports this could cause OOM.\n\nLocation: internal/api/export.go:122-170\n\nOptions:\n1. Document limitation (JSON format requires full array, can't stream)\n2. Add max_rows limit for JSON format\n3. Use streaming JSON array format with leading comma\n\nTDD approach:\n1. Write test exporting 10k+ flows as JSON, measure memory\n2. Decide on approach\n3. Implement fix\n4. Verify memory bounded\n\nAcceptance: JSON export either streams or has documented memory limit","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T15:48:07.0586451-05:00","updated_at":"2026-01-25T16:02:55.4049288-05:00","closed_at":"2026-01-25T16:02:55.4049288-05:00","close_reason":"Closed"}
{"id":"langley-75p","title":"AUTH: Token passed in URL query param (token=) is logged and may leak in server logs","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T12:23:46.1055245-05:00","updated_at":"2026-01-24T16:14:22.1852925-05:00","closed_at":"2026-01-24T16:14:22.1852925-05:00","close_reason":"Fixed in Phase 2.2.7 - returns 400"}
{"id":"langley-77j8","title":"Anomalies: hide or archive dismissed warnings","description":"No way to dismiss or archive anomaly warnings once reviewed. Add a hide/archive action so acknowledged warnings don't clutter the view. Persist dismissal state so they don't reappear on refresh.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-01T12:27:56.1298645-05:00","updated_at":"2026-02-01T12:27:56.1298645-05:00","labels":["anomalies","feature"]}
{"id":"langley-79u","title":"AUTH: Bearer token comparison vulnerable to timing attack - use constant-time compare","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T12:23:56.2036283-05:00","updated_at":"2026-01-24T16:15:02.5645929-05:00","closed_at":"2026-01-24T16:15:02.5645929-05:00","close_reason":"Fixed in Phase 2.2.10 - subtle.ConstantTimeCompare"}
{"id":"langley-7ln","title":"2.4.6: Implement dark/light theme toggle","description":"Implement theme toggle with CIA.gov-inspired palette:\n\nDark theme (default):\n- Background: #161618 (dark navy/black)\n- Accent: #e21a41 (red)\n- Text: #fff\n- Grid/borders: #414143\n- Alt sections: #1a1a1c\n\nLight theme:\n- Background: #efeff3 (light gray)\n- Accent: #e21a41 (red stays consistent)\n- Text: #000\n- Grid/borders: #d0d0d4\n\nImplementation per .docs/spikes/theme-toggle.md:\n- CSS variables with [data-theme] attribute\n- localStorage persistence\n- System preference as default\n- Toggle in header\n- ~40 LOC\n\nFollows from research in langley-7rr.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T07:40:39.7885499-05:00","updated_at":"2026-01-25T07:45:54.6263613-05:00","closed_at":"2026-01-25T07:45:54.6263613-05:00","close_reason":"Theme toggle implemented with CIA.gov-inspired palette. Dark theme default (#161618 bg, #e21a41 accent). Light theme available. localStorage persistence, system preference detection.","labels":["frontend","phase2"]}
{"id":"langley-7rr","title":"2.4.6: Dark/light theme toggle","description":"Needs planning.\n\nGoal: User can switch between dark and light themes in dashboard.\n\nPlanning needed:\n- CSS variables approach vs class-based?\n- Persist preference (localStorage)?\n- System preference detection (prefers-color-scheme)?\n- Which components need theme-aware styling?\n- Toggle UI placement?\n\nCurrent: Dashboard uses dark theme only (see web/src/index.css).\n\nAcceptance: Plan approved, theme system designed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:04:48.995211-05:00","updated_at":"2026-01-24T19:03:32.7966481-05:00","closed_at":"2026-01-24T19:03:32.7966481-05:00","close_reason":"Planning complete. Documented in .docs/spikes/theme-toggle.md. Key decisions: CSS variables with [data-theme] attribute (already using vars), localStorage persistence, system preference as default, toggle in header next to connection status. Light palette uses Tailwind slate scale inverted. ~40 LOC to implement.","labels":["phase2","planning"]}
{"id":"langley-7tw","title":"Style: light theme missing explicit --error-bg token","description":"## E2E Failure: S9 Assertion 9a — Light theme missing explicit --error-bg\n\n**Expected**: All design tokens listed in the style guide are explicitly defined in both dark and light theme blocks.\n**Observed**: --error-bg is only defined in :root (dark theme) as color-mix(in srgb, var(--error) 10%, transparent). The [data-theme=light] block does not re-declare it.\n\nFunctionally it works because --error-bg references var(--error) which cascades from the light theme, but it is not explicitly listed in the light theme block. If someone reads the light theme block to understand all tokens, they will miss --error-bg.\n\n**File**: web/src/index.css (lines 21-36, light theme block)\n\n**Fix**: Add --error-bg: color-mix(in srgb, var(--error) 10%, transparent); to the [data-theme=light] block. This makes it explicit even though the resolved value would be the same via cascade.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T09:14:34.9614878-05:00","updated_at":"2026-01-31T12:57:38.8779772-05:00","closed_at":"2026-01-31T12:57:38.8779772-05:00","close_reason":"Added --error-bg to light theme block in web/src/index.css","labels":["e2e","style-guide"]}
{"id":"langley-8de","title":"2.3: Multi-provider support (Bedrock, OpenAI, Gemini)","description":"Parent issue for multi-provider support.\n\nSub-tasks:\n- langley-vdn: Provider interface + Anthropic extraction (P1, unblocks others)\n- langley-xj8: OpenAI provider\n- langley-4m0: Bedrock provider  \n- langley-m1i: Gemini provider\n\nOriginal scope from PHASE2.md:\n- Provider interface: DetectProvider, ParseUsage, GetPricing, StreamHandler\n- Implement: Claude (extract), OpenAI, Bedrock, Gemini providers\n- Pricing: go:embed pricing.json + local overrides","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:03:45.7801049-05:00","updated_at":"2026-01-25T07:34:05.6423802-05:00","closed_at":"2026-01-25T07:34:05.6423802-05:00","close_reason":"Multi-provider support complete. All four providers implemented: Anthropic (existing), OpenAI, Bedrock, Gemini. Registry wired, tests passing.","labels":["feature","full-cycle","phase2"]}
{"id":"langley-8oh","title":"UX: No save confirmation in Settings","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T07:04:19.3564635-05:00","updated_at":"2026-01-31T07:13:15.0372858-05:00","closed_at":"2026-01-31T07:13:15.0372858-05:00","close_reason":"Added settings-saved success message with auto-dismiss after 3s","labels":["feedback","ux-audit"]}
{"id":"langley-8rh","title":"UX: SPA does not push browser history — back button broken","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:03:12.3153873-05:00","updated_at":"2026-01-31T01:34:00.8468537-05:00","closed_at":"2026-01-31T01:34:00.8468537-05:00","close_reason":"Closed","labels":["navigation","ux-audit"]}
{"id":"langley-8rq","title":"API: /api/flows/count and /api/stats total_flows use different scoping","description":"## E2E Finding (S4.3)\n\n/api/flows/count returns all-time count (3885) while /api/stats returns total_flows scoped to a 24h window (6). The Analytics UI displays the all-time value (3885), matching /api/flows/count.\n\n**Expected:** Both endpoints should return consistent values, or the scoping difference should be documented in the API contract.\n\n**Observed:**\n- GET /api/flows/count -\u003e {\"count\": 3885}\n- GET /api/stats -\u003e {\"total_flows\": 6, \"start_time\": \"2026-01-30T08:11:28\", \"end_time\": \"2026-01-31T08:11:28\"}\n- Analytics UI Total Flows card: 3885\n\n**Impact:** Clients comparing these endpoints will get contradictory numbers.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T08:30:54.4462568-05:00","updated_at":"2026-01-31T09:18:14.8412886-05:00","closed_at":"2026-01-31T09:18:14.8412886-05:00","close_reason":"Fixed: added all_time_flows to /api/stats response (commit b3a1f71). E2E confirmed /api/flows/count matches all_time_flows from /api/stats."}
{"id":"langley-8wb","title":"DATA EXPOSURE: SQLite database file has no explicit permissions set - inherits parent dir","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T12:24:45.2458482-05:00","updated_at":"2026-01-24T16:14:57.1018707-05:00","closed_at":"2026-01-24T16:14:57.1018707-05:00","close_reason":"Fixed in Phase 2.2.11 - 0600 permissions on Unix"}
{"id":"langley-93c","title":"SEC-LOW: localStorage credential storage lacks encryption","description":"Phase 3.3 stores client_secret in localStorage. While acceptable for localhost-only, this means:\\n1. Any JS on the same origin can read credentials\\n2. XSS on dashboard exposes long-lived credentials\\n3. Browser extensions with storage access can read them\\n4. Consider sessionStorage or memory-only as alternative","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:37:51.1167508-05:00","updated_at":"2026-01-25T17:21:29.7366165-05:00","closed_at":"2026-01-25T17:21:29.7366165-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-9bm","title":"3.1.4 UX Review: Tasks view","description":"Verify Tasks view features:\n\nT1: Task list table (all columns, empty state)\nT2: Task ID display (truncated with ..., full on hover?)\nT3: Click → filter flows (sets filter, switches to Flows view)\nT4: Duration display (formatted ms/s/m, very long duration)\nT5: Cost display (formatted currency, zero cost)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:49:02.1964279-05:00","updated_at":"2026-01-25T18:45:30.2467582-05:00","closed_at":"2026-01-25T18:45:30.2467582-05:00","close_reason":"Verified: T1-T5 working. Task list shows 30 tasks with all columns. Click task drills down to filtered Flows view. Duration and cost formatting correct."}
{"id":"langley-9fg","title":"Decompose god component (App.tsx 1122 lines)","description":"App.tsx is a single 1122-line function with 22 useState hooks, 9 useCallback, 5 useEffect, 7 inline render functions, and zero child components. Root cause of many downstream issues. Decompose into ~8-10 focused components: FlowList, FlowDetail, AnalyticsView, TasksView, ToolsView, AnomaliesView, SettingsView, Nav, plus shared types module. Ref: QA audit P1-01.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T16:53:08.4142001-05:00","updated_at":"2026-01-31T18:42:51.5639735-05:00","closed_at":"2026-01-31T18:42:51.5639735-05:00","close_reason":"God component decomposed: 1125-line App.tsx split into 16 focused modules, 191-line orchestrator. E2E verified 16/16.","labels":["audit","structure","ux"],"dependencies":[{"issue_id":"langley-9fg","depends_on_id":"langley-uw4","type":"blocks","created_at":"2026-01-31T17:44:16.686831-05:00","created_by":"unknown"}]}
{"id":"langley-9qh","title":"CRITICAL: No credential redaction in Clancy reference - API keys stored in plaintext","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-24T07:19:17.8536632-05:00","updated_at":"2026-01-24T16:16:11.1140904-05:00","closed_at":"2026-01-24T16:16:11.1140904-05:00","close_reason":"N/A - Clancy is a reference project, not part of Langley"}
{"id":"langley-9qp","title":"STYLE-GUIDE vs CSS: Typography claims 'system sans-serif' but actual font-family is '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif' - guide should list exact stack for E2E assertion","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:21:12.2802048-05:00","updated_at":"2026-01-31T06:51:59.3913357-05:00","closed_at":"2026-01-31T06:51:59.3913357-05:00","close_reason":"Already fixed: style guide line 33 lists exact font stack matching CSS"}
{"id":"langley-9vd","title":"INPUT: SSE parser has no max buffer size - malicious response can cause OOM (addresses Phase 1.5.2)","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-24T12:24:16.6962603-05:00","updated_at":"2026-01-24T16:14:00.2826722-05:00","closed_at":"2026-01-24T16:14:00.2826722-05:00","close_reason":"Fixed in Phase 1.5.2 - SSE parser limits"}
{"id":"langley-9xy","title":"3.1.2 UX Review: Flows view","description":"Verify Flows view features:\n\nF1: Flow list display (method, host, path, status, tokens, cost; empty state)\nF2: Filter by host (real-time filter, clear shows all)\nF3: Filter by task ID (filters, invalid → empty)\nF4: Filter by status (All/Success/Error dropdown)\nF5: Click flow → detail panel\nF6: Flow detail: headers (request/response, missing → graceful)\nF7: Flow detail: bodies (request/response, large body handling)\nF8: Flow detail: metadata (tokens, cost, duration, model)\nF9: SSE badge (shows for streaming, hidden for non-SSE)\nF10: Export NDJSON (downloads file, respects filters)\nF11: Export JSON (downloads file, \u003e10k limit warning)\nF12: Export CSV (downloads file, \u003e10k limit warning)\nF13: Export confirmation (accurate count matches actual)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:48:34.0428984-05:00","updated_at":"2026-01-25T18:45:04.7704647-05:00","closed_at":"2026-01-25T18:45:04.7704647-05:00","close_reason":"Verified: F1-F6,F8-F13 all working. F7 bodies not visible (raw storage off by default). Usage section empty but UI renders correctly."}
{"id":"langley-a4m","title":"Claude CLI streaming requests fail through proxy","description":"Claude CLI hangs when making streaming /v1/messages requests through the proxy.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T12:16:10.4192177-05:00","updated_at":"2026-01-25T13:58:11.3341796-05:00","closed_at":"2026-01-25T13:25:00-05:00","labels":["bug","streaming"]}
{"id":"langley-a61","title":"MEDIUM: SQLite WAL without proper locking may corrupt under concurrent access","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:21:20.879977-05:00","updated_at":"2026-01-24T18:40:35.4384733-05:00","closed_at":"2026-01-24T18:40:35.4384733-05:00","close_reason":"Not an issue. SQLite properly configured: WAL mode, SetMaxOpenConns(1) for single-writer pattern, busy_timeout=5000ms. This is correct SQLite concurrency handling."}
{"id":"langley-aev","title":"LOW: Langley design host binding to localhost provides no guarantee against port forwarding","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:22:26.3941741-05:00","updated_at":"2026-01-24T18:45:28.6015265-05:00","closed_at":"2026-01-24T18:45:28.6015265-05:00","close_reason":"Acceptable. Localhost binding + auth token + rate limiting provides defense in depth. Port forwarding is user-initiated action outside tool's threat model."}
{"id":"langley-ag6","title":"LOW: refraction-networking/utls is a third-party fork of Go crypto/tls","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:22:00.9530939-05:00","updated_at":"2026-01-24T18:44:36.3122562-05:00","closed_at":"2026-01-24T18:44:36.3122562-05:00","close_reason":"Acceptable risk. utls is widely used for TLS fingerprinting. The proxy uses it for JA3/JA4 detection, not security-critical operations."}
{"id":"langley-ahe","title":"UX: Nav bar overflows at mobile viewport (480px)","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T07:04:55.493025-05:00","updated_at":"2026-01-31T07:22:01.73546-05:00","closed_at":"2026-01-31T07:22:01.73546-05:00","close_reason":"Added 480px media query — nav scrolls horizontally with hidden scrollbar and reduced button sizing. E2E verified: all 6 buttons fit at 480px (433px total).","labels":["responsiveness","ux-audit"]}
{"id":"langley-ahgo","title":"Extract tools from non-streaming JSON responses","description":"Tool extraction only runs inside streamSSEWithParser() for SSE responses. When an API call uses stream:false, the non-SSE path (mitm.go:591+) buffers and forwards the body but never parses it for tool_use blocks. Any tools in non-streaming responses are silently lost.\n\n## Impact\n- Clients using stream:false (common for simple tool-use patterns) get zero tool tracking\n- Anthropic non-streaming responses contain tool_use in content[] array\n- OpenAI non-streaming responses contain tool_calls in choices[].message\n\n## Scope\n- Parse buffered response body in the non-SSE path for tool extraction\n- Support Anthropic format (content[].type == tool_use)\n- Support OpenAI format (choices[].message.tool_calls[])\n- Save extracted tools via SaveToolInvocation() same as SSE path\n\n## Context\n- Spike: .docs/spikes/TOOLS.md (finding #2)\n- mitm.go:553,565 — IsSSE gate\n- mitm.go:591+ — non-SSE path (no tool extraction)\n- parser/sse.go:260 — ExtractToolUses() only handles SSE events\n\n## Acceptance Criteria\n- [ ] Tools from non-streaming Anthropic responses appear in tool_invocations\n- [ ] Tools from non-streaming OpenAI responses appear in tool_invocations\n- [ ] No regression in SSE tool extraction","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-01T08:22:29.7065015-05:00","updated_at":"2026-02-01T08:22:29.7065015-05:00"}
{"id":"langley-aj4","title":"PHASE3-REVIEW: Section 3.3 OAuth client credentials flow - security audit findings","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:37:01.7358689-05:00","updated_at":"2026-01-25T17:21:13.3425395-05:00","closed_at":"2026-01-25T17:21:13.3425395-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-aub","title":"3.5 OpenAPI specification","description":"Create machine-readable API documentation.\n\nEndpoints to document:\n- GET /api/flows (list, paginated, filterable)\n- GET /api/flows/count\n- GET /api/flows/export\n- GET /api/flows/{id}\n- GET /api/flows/{id}/events\n- GET /api/flows/{id}/anomalies\n- GET /api/stats\n- GET /api/analytics/tasks\n- GET /api/analytics/tasks/{id}\n- GET /api/analytics/tools\n- GET /api/analytics/cost/daily\n- GET /api/analytics/cost/model\n- GET /api/analytics/anomalies\n- GET /api/health\n- POST /api/checkpoint\n- GET /api/settings\n- PUT /api/settings\n- WS /ws\n\nAcceptance:\n- [ ] OpenAPI 3.0 spec created\n- [ ] All endpoints documented with request/response schemas\n- [ ] Validated against actual API behavior\n- [ ] Added to repo (openapi.yaml or similar)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:22:37.5068674-05:00","updated_at":"2026-01-25T18:22:11.4931915-05:00","closed_at":"2026-01-25T18:22:11.4931915-05:00"}
{"id":"langley-awl","title":"MEDIUM: CA certificate 10-year validity is excessive","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:20:33.3388069-05:00","updated_at":"2026-01-24T18:40:10.2427883-05:00","closed_at":"2026-01-24T18:40:10.2427883-05:00","close_reason":"Already fixed. internal/tls/ca.go:22 shows CAValidityYears reduced from 10 to 2 years."}
{"id":"langley-b4a","title":"STYLE-GUIDE vs CSS: Tables section claims 'Selected row: accent outline' but CSS has NO .data-table tr.selected rule. Only .data-table tbody tr.keyboard-selected exists (line 946-951) using outline:2px solid var(--accent). The style guide says 'selected row' but the implementation is keyboard-selected only.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:22:59.7952479-05:00","updated_at":"2026-01-31T06:52:26.8596039-05:00","closed_at":"2026-01-31T06:52:26.8596039-05:00","close_reason":"Fixed: removed false click-selected claim from Tables section — data tables only support keyboard-selected (App.tsx lines 836,877 confirm no .selected class on table rows)"}
{"id":"langley-b4x","title":"UX: Settings accepts out-of-range values with no validation error","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:04:49.4498442-05:00","updated_at":"2026-01-30T18:42:30.6041176-05:00","closed_at":"2026-01-30T18:42:30.6041176-05:00","close_reason":"Closed","labels":["error-handling","ux-audit"]}
{"id":"langley-b51","title":"Fix WebSocket vs REST race condition on flow updates","description":"REST fetchFlows (App.tsx:244-247) calls setFlows(data) which replaces the entire array. If a WebSocket message arrives between REST request and response, the WS update is applied to old state, then REST overwrites it. Classic REST-vs-WS race. Need: merge strategy or sequence numbering so REST responses don't clobber in-flight WS updates. Also: no re-fetch on WS reconnect (P2-05), so flow list goes stale after disconnect. Ref: QA audit P1-04, P2-05.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:53:24.1177273-05:00","updated_at":"2026-02-01T02:05:02.7858869-05:00","closed_at":"2026-02-01T02:05:02.7858869-05:00","close_reason":"Fixed in ae1d9e9: mergeFlows utility replaces raw setFlows(data) with merge strategy, onReconnect re-fetches on WS reconnect. 10/10 E2E verifications passed.","labels":["audit","state","ux"]}
{"id":"langley-b63","title":"STYLE-GUIDE vs CSS: Motion section says 'respect prefers-reduced-motion' but NO @media(prefers-reduced-motion) rule exists anywhere in index.css. This is a FALSE claim in the style guide.","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T02:21:35.805362-05:00","updated_at":"2026-01-31T02:52:34.5821751-05:00","closed_at":"2026-01-31T02:52:34.5821751-05:00","close_reason":"Closed"}
{"id":"langley-bau","title":"UX: No export completion feedback after download","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:14.6085533-05:00","updated_at":"2026-01-30T07:06:14.6085533-05:00","labels":["feedback","ux-audit"]}
{"id":"langley-bma","title":"HIGH: In-memory certificate cache never evicts - memory exhaustion possible","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:20:04.4489973-05:00","updated_at":"2026-01-24T18:38:28.6657028-05:00","closed_at":"2026-01-24T18:38:28.6657028-05:00","close_reason":"Already fixed. internal/tls/certcache.go implements LRU cache with evictOldest() and configurable maxSize (default 1000)."}
{"id":"langley-boc","title":"Export API: Format abstraction + CSV/JSON writers","description":"Add FlowExporter interface and additional format writers.\n\n- Define FlowExporter interface for format abstraction\n- JSON writer (array format for small exports, with meta object)\n- CSV writer (summary fields, 10k row limit)\n- Add include_bodies support across all formats\n- Add format query param parsing (json/ndjson/csv)\n- X-Export-Truncated-Bodies header when bodies included\n\n~100 LOC. Builds on langley-3d4.\n\nRef: .docs/spikes/export-flows.md","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T10:56:22.5896405-05:00","updated_at":"2026-01-25T13:58:26.3447559-05:00","closed_at":"2026-01-25T13:58:26.3447559-05:00","close_reason":"Implemented FlowExporter interface with NDJSON/JSON/CSV exporters","labels":["api","phase2"],"dependencies":[{"issue_id":"langley-boc","depends_on_id":"langley-3d4","type":"blocks","created_at":"2026-01-25T10:57:17.1824395-05:00","created_by":"unknown"}]}
{"id":"langley-byj","title":"Fix WebSocket vs REST race condition on flow updates","description":"fetchFlows() calls setFlows(data) which replaces the entire array (line 247). If a WebSocket message arrives between REST request and response, the WS update is applied to old state, then the REST response overwrites it entirely. Classic REST-vs-WS race. Fix options: (1) merge strategy comparing timestamps, (2) sequence numbering, (3) suppress REST fetch while WS is connected. Also: no catch-up mechanism on WS reconnect (P2-05) — client misses flows during disconnection with no re-fetch. App.tsx lines 217-247. QA audit ref: P1-04, P2-05.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:54:09.5941714-05:00","updated_at":"2026-01-31T17:40:01.9165083-05:00","closed_at":"2026-01-31T17:40:01.9165083-05:00","close_reason":"Duplicate of langley-b51","labels":["data-integrity","state"]}
{"id":"langley-c65","title":"3.1.6 UX Review: Anomalies view","description":"Verify Anomalies view features:\n\nN1: Anomaly list (shows anomalies, empty state 'No anomalies')\nN2: Severity badge (color-coded, all severity levels)\nN3: View Flow link (opens flow detail, deleted flow → graceful)\nN4: Badge in nav (shows count when \u003e0, updates live)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:49:30.2053886-05:00","updated_at":"2026-01-25T18:45:45.2183254-05:00","closed_at":"2026-01-25T18:45:45.2183254-05:00","close_reason":"Verified: AN1 working. Empty state shows 'No anomalies detected - Everything looks normal\\!'"}
{"id":"langley-chv3","title":"Add time range filters to all dashboard views","description":"Tools tab has a time range selector but Flows, Tasks, and Anomalies views do not. Add consistent time filtering across all views for parity.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-01T12:27:49.6548381-05:00","updated_at":"2026-02-01T13:27:04.0908239-05:00","closed_at":"2026-02-01T13:27:04.0908239-05:00","close_reason":"Closed","labels":["feature","ux"]}
{"id":"langley-cs4","title":"Surface API errors to users instead of silent null","description":"apiFetch() silently returns null on all non-200/non-401 responses and network errors (App.tsx:164-177). Every consumer checks 'if (data)' and does nothing on failure. Result: if API is down, user sees empty dashboard with no error. If 500 occurs, user sees stale data. Only auth errors show a message. Need: error state per view, user-visible error feedback. Ref: QA audit P1-08.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:53:16.1726309-05:00","updated_at":"2026-02-01T01:33:33.0297241-05:00","closed_at":"2026-02-01T01:33:33.0297241-05:00","close_reason":"Closed","labels":["audit","error-handling","ux"]}
{"id":"langley-csq","title":"STYLE-GUIDE vs CSS: Badges section claims 'Colors: status tokens (success, warning, error, info)' but .badge default uses --accent (not a status token) and .badge.sse uses hardcoded #8b5cf6 (purple) which is NOT a design token at all. Violates the guide's own 'Only use token variables in CSS' rule.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:23:11.3793529-05:00","updated_at":"2026-01-31T07:40:47.1546379-05:00","closed_at":"2026-01-31T07:40:47.1546379-05:00","close_reason":"Already resolved: CSS uses var(--accent) and var(--sse) tokens, style guide documents this. No hardcoded colors."}
{"id":"langley-cv4t","title":"Security Review: MITM passthrough fix for langley-5rq7 — Passthrough tunnel missing close propagation and deadline","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-01T11:20:46.8773456-05:00","updated_at":"2026-02-01T11:20:46.8773456-05:00","dependencies":[{"issue_id":"langley-cv4t","depends_on_id":"langley-5rq7","type":"blocks","created_at":"2026-02-01T11:21:19.6186688-05:00","created_by":"unknown"}]}
{"id":"langley-cye","title":"Responsive and UX anti-patterns","description":"Grouped responsive and UX issues: (1) Flow detail panel hardcoded 500px — cramped between 768-1200px (P2-18, overlaps langley-6g7). (2) Chart bars min-width:50px causes overflow on 30-day view — 50*30=1500px minimum (P2-19). (3) Mobile nav hides scrollbar with no scroll affordance (P3-20). (4) Unsaved settings lost on view switch with no warning (P2-21). (5) scrollIntoView fires on every render via ref callback, not just on selectedIndex change — causes jank during WS updates (P2-22). (6) WebSocket URL hardcoded to ws:// — breaks if ever served over HTTPS (P2-23). QA audit ref: P2-18 through P2-23.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:55:07.7706824-05:00","updated_at":"2026-01-31T16:55:07.7706824-05:00","labels":["responsive","ux"]}
{"id":"langley-cz8","title":"UX: Misleading empty state on initial load before WebSocket connects","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-30T07:04:13.3461717-05:00","updated_at":"2026-01-30T18:42:36.8819037-05:00","closed_at":"2026-01-30T18:42:36.8819037-05:00","close_reason":"Closed","labels":["feedback","ux-audit"]}
{"id":"langley-d49","title":"SEC-MEDIUM: Race condition in credential registration flow","description":"Phase 3.3 states GET /auth 'Generates new credentials if none exist for this client'. Without proper synchronization:\\n1. Multiple concurrent requests could generate duplicate credentials\\n2. No client identifier specified - how does server know 'this client'?\\n3. Missing atomicity guarantees for credential storage","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:37:38.5757704-05:00","updated_at":"2026-01-25T17:21:02.4252847-05:00","closed_at":"2026-01-25T17:21:02.4252847-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-d7y","title":"REDACTION GAP: JSON-escaped keys not handled - \\\"x-api-key\\\" bypasses header redaction","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-24T12:23:26.8742891-05:00","updated_at":"2026-01-24T16:14:05.7583711-05:00","closed_at":"2026-01-24T16:14:05.7583711-05:00","close_reason":"Fixed in Phase 2.2 P0 - JSON-escaped key redaction"}
{"id":"langley-db5","title":"1.5: Race detection verification","description":"Verification gap identified by Reba.\n\nIssue: Phase 1.5 acceptance requires 'go test -race ./...' to pass, but this requires CGO which is unavailable on Windows dev environment.\n\nOptions:\n1. Document Linux/macOS CI run where race detection passed\n2. Run manually on non-Windows environment\n3. Set up GitHub Actions with race detection\n4. Mark as known limitation\n\nAcceptance: Either race detection passes on some verified environment, or gap is documented as known limitation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:14:41.7489739-05:00","updated_at":"2026-01-24T19:07:13.9487326-05:00","closed_at":"2026-01-24T19:07:13.9487326-05:00","close_reason":"Created .github/workflows/ci.yml with race detection. Runs 'go test -race ./...' on ubuntu-latest with Go 1.25. Also includes golangci-lint and build verification. Race detection will be verified on every push/PR to main.","labels":["phase2","testing","verification-gap"]}
{"id":"langley-dc8","title":"MEDIUM: WebSocket messages broadcast to all clients without flow-level isolation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:20:47.6573347-05:00","updated_at":"2026-01-24T18:41:55.4339026-05:00","closed_at":"2026-01-24T18:41:55.4339026-05:00","close_reason":"By design. Local dev tool dashboard broadcasts to all connected clients intentionally - single user typically viewing all proxy traffic. Flow-level isolation not needed."}
{"id":"langley-dl9","title":"SPEC-GAP: Token refresh timing not specified","description":"Phase 3.3 says 'Dashboard checks expires_at before requests, If expired/expiring soon...' but doesn't specify:\\n1. What is 'expiring soon' threshold? 5 min? 1 hour?\\n2. What if refresh fails mid-session?\\n3. Should there be exponential backoff on refresh failures?\\n4. UI feedback when auth session expires?","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:38:17.2006619-05:00","updated_at":"2026-01-25T17:21:24.2911701-05:00","closed_at":"2026-01-25T17:21:24.2911701-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-dst","title":"SPEC-GAP: Acceptance criteria lack specific security test cases","description":"Phase 3.3 acceptance criteria missing:\\n1. Test that non-localhost origins are rejected\\n2. Test that invalid client_id/client_secret returns 401\\n3. Test that expired access_token is rejected\\n4. Test constant-time comparison for credential validation\\n5. Test that client_secret is stored securely server-side","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:38:29.2021519-05:00","updated_at":"2026-01-25T17:20:51.5472839-05:00","closed_at":"2026-01-25T17:20:51.5472839-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-du7","title":"MEDIUM: RSA 2048-bit keys may be considered weak for long-lived CA certificates","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:20:54.4896553-05:00","updated_at":"2026-01-24T18:42:01.4489683-05:00","closed_at":"2026-01-24T18:42:01.4489683-05:00","close_reason":"Acceptable for use case. RSA-2048 is NIST-approved until 2030. CA cert validity is only 2 years. For local dev proxy, this key strength is appropriate."}
{"id":"langley-e0v","title":"Harden e2e-smoke and fix cross-skill issues","description":"Verification skill improvements from audit: (1) e2e-smoke uses subjective snapshot interpretation for assertions — should adopt browser_evaluate + gate/assertion separation from e2e-confirm. Highest false-positive risk of all 4 skills. (2) Server bootstrap is copy-pasted across all 4 skills (~50 lines each). One change = 4 edits. Extract to shared reference. (3) e2e-confirm Scenario 9 hardcodes CSS class selectors while rest of skill uses discovered selectors via Phase 0.5 — internal inconsistency in the most rigorous skill. (4) No skill covers performance/latency, concurrent load, WebSocket reconnect, or cross-browser. (5) External dependency on httpbin.org with no localhost fallback.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:55:40.6418098-05:00","updated_at":"2026-01-31T16:55:40.6418098-05:00","labels":["skills","testing"]}
{"id":"langley-e3y","title":"Error handling: error boundary, loading states, alert role","description":"Three related error-handling gaps: (1) No React error boundary — any render error crashes entire app to white screen (P2-10). (2) No loading states for view-specific fetches — switching to Tasks shows flash of 'No tasks yet' before data loads (P2-09, overlaps existing langley-p46). (3) error-banner div missing role=alert and aria-live=assertive, plus no dismiss mechanism (P2-11). QA audit ref: P2-09, P2-10, P2-11.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:54:51.4032736-05:00","updated_at":"2026-01-31T16:54:51.4032736-05:00","labels":["errors","ux"]}
{"id":"langley-ebx","title":"3.4 Architecture documentation","description":"Create contributor documentation for the codebase.\n\nContents:\n- Project structure overview\n- Data flow (request → proxy → store → UI)\n- Key abstractions (Store, Provider, Redactor, etc.)\n- How to add a new provider\n- How to add a new API endpoint\n- Testing strategy\n\nLocation: ARCHITECTURE.md or docs/\n\nAcceptance:\n- [ ] New contributor can understand codebase from docs\n- [ ] Data flow diagram included\n- [ ] Key interfaces documented\n- [ ] Extension points explained","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T17:22:20.5559512-05:00","updated_at":"2026-01-25T18:22:06.0098657-05:00","closed_at":"2026-01-25T18:22:06.0098657-05:00"}
{"id":"langley-ebz","title":"STYLE-GUIDE vs CSS: Contrast claim '\u003e=4.5:1 for normal text' - Dark theme: --text-primary #ffffff on --bg-primary #161618 = ~18.1:1 (passes). Light theme: --text-primary #161618 on --bg-primary #efeff3 = ~14.8:1 (passes). BUT --text-muted #6a6a6e on dark #161618 = ~3.9:1 (FAILS 4.5:1 for normal text) and on light #efeff3 = ~3.8:1 (FAILS). Muted text violates WCAG AA.","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T02:21:41.5787031-05:00","updated_at":"2026-01-31T02:53:41.004666-05:00","closed_at":"2026-01-31T02:53:41.004666-05:00","close_reason":"Closed"}
{"id":"langley-epo","title":"MEDIUM: Langley redaction patterns may miss embedded credentials in JSON values","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:21:07.8757289-05:00","updated_at":"2026-01-24T16:15:13.4902021-05:00","closed_at":"2026-01-24T16:15:13.4902021-05:00","close_reason":"Fixed in Phase 2.2.13 - JSON credential field redaction"}
{"id":"langley-ewr","title":"2.4.7: Keyboard shortcuts (j/k, / search)","description":"Needs research.\n\nGoal: Vim-style navigation and quick search access.\n\nResearch needed:\n- j/k for list navigation (flows, tasks, etc.)\n- / to focus search\n- Escape to clear/close\n- ? for help overlay?\n- Conflict with browser shortcuts?\n- Accessibility considerations?\n- Library vs vanilla implementation?\n\nAcceptance: Research complete, approach documented.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:05:04.6082548-05:00","updated_at":"2026-01-24T19:01:30.0772226-05:00","closed_at":"2026-01-24T19:01:30.0772226-05:00","close_reason":"Research complete. Documented in .docs/spikes/keyboard-shortcuts.md. Key decisions: vanilla React (no library), j/k for list navigation with selectedIndex state, / focuses search, Escape closes panels, ? shows help modal, 1-6 switches views. ARIA listbox pattern for accessibility. ~150 LOC to implement.","labels":["phase2","research"]}
{"id":"langley-f75","title":"STYLE-GUIDE vs CSS: Buttons disabled claim says 'reduce opacity, keep text readable' - .primary-btn:disabled uses opacity:0.5. At 50% opacity on dark bg, white text becomes effectively ~9:1 (still readable). But secondary-btn has NO disabled styles at all.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:22:27.3634458-05:00","updated_at":"2026-01-31T06:52:20.0304539-05:00","closed_at":"2026-01-31T06:52:20.0304539-05:00","close_reason":"Already fixed: .secondary-btn:disabled rule exists in CSS (opacity:0.5, cursor:not-allowed)"}
{"id":"langley-ffw","title":"Extract Nav, FlowDetail, HelpModal, ExportModal components","description":"Extract four leaf components from App.tsx render functions: (1) Nav — takes view, navigateTo, anomalyCount props. Renders nav buttons with aria-current. (2) FlowDetail — takes flow (Flow), onClose callback. Renders request/response/usage detail grid. (3) HelpModal — takes onClose callback, manages its own focus trap. (4) ExportModal — takes exportConfig, onConfirm, onCancel. Renders confirmation dialog with row count warning.","acceptance_criteria":"- web/src/components/Nav.tsx with typed props interface\n- web/src/components/FlowDetail.tsx with typed props interface\n- web/src/components/HelpModal.tsx with typed props interface and internal focus trap\n- web/src/components/ExportModal.tsx with typed props interface\n- App.tsx renders these components instead of calling renderNav/renderFlowDetail\n- All aria attributes preserved (aria-current, aria-modal, aria-labelledby, role=dialog)\n- Focus trap in HelpModal works identically\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:54:00.6968241-05:00","updated_at":"2026-01-31T18:42:04.9910849-05:00","closed_at":"2026-01-31T18:42:04.9910849-05:00","close_reason":"Extracted Nav, FlowDetail, HelpModal, ExportModal components","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-ffw","depends_on_id":"langley-pcm","type":"blocks","created_at":"2026-01-31T18:01:49.9505749-05:00","created_by":"unknown"}]}
{"id":"langley-fof","title":"Actionable error messages","description":"Replace cryptic errors with clear guidance.\n\n## Context\nCurrent errors are raw Go errors that don't help users fix problems.\n\n## Examples to improve\n\n### Port in use (after fallback exhausted)\nCurrent:\n\\Target:\n\\\n### CA cert corrupted\nCurrent:\n\\Target:\n\\\n### Database locked\nCurrent:\n\\Target:\n\\\n## Acceptance Criteria\n- [ ] Port binding failures have OS-specific kill commands\n- [ ] CA/cert errors explain how to regenerate\n- [ ] Database errors suggest checking for other processes\n- [ ] All errors end with actionable next step\n- [ ] Errors print to stderr with clear formatting\n\n## Files\n- cmd/langley/main.go (error handling throughout)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:10:59.8476425-05:00","updated_at":"2026-01-26T08:05:13.6005086-05:00","closed_at":"2026-01-26T08:05:13.6005086-05:00"}
{"id":"langley-fq1","title":"Fix E2E test suite","description":"The E2E test file exists but doesn't run - investigate and fix.\n\n## Context\ntest/e2e/e2e_test.go has 640 lines of comprehensive tests but `go test` reports 'no tests to run'. This is blocking E2E validation of the proxy.\n\n## Investigation needed\n- [ ] Why aren't tests discovered? Build tags? Package name?\n- [ ] Are there missing dependencies or setup?\n- [ ] Is the test structure correct?\n\n## Acceptance Criteria\n- [ ] `go test ./test/e2e/...` discovers and runs tests\n- [ ] Tests pass (or failures are documented as new issues)\n- [ ] E2E tests run in `make test` or separate `make test-e2e`\n\n## Files\n- test/e2e/e2e_test.go (640 lines)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:16.9024262-05:00","updated_at":"2026-01-27T06:34:42.6573132-05:00","closed_at":"2026-01-27T06:34:42.6573132-05:00","close_reason":"Tests already working - 5 E2E tests pass"}
{"id":"langley-g2g","title":"UX: Export dropdown has no label or icon","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:36.6210269-05:00","updated_at":"2026-01-30T07:06:36.6210269-05:00","labels":["discoverability","ux-audit"]}
{"id":"langley-g5u","title":"Export: 30 flows have null status_code — data contract gap","description":"## E2E Failure: S7 Assertion 3 — Export flows with null status_code\n\n**Expected**: Every exported flow has id, host, method, path, status_code fields.\n**Observed**: 30 out of 3913 flows have null status_code.\n\nThese are historical flows where the proxy captured the request but the upstream response was never received (connection timeouts, drops). The StatusCode field in FlowSummary uses Go omitempty on *int, so it is omitted rather than set to a sentinel value.\n\n**Impact**: Consumers of the export data cannot distinguish between 'no response yet' and 'field missing in schema.'\n\n**File**: internal/api/api.go (~line 1040, FlowSummary.StatusCode uses omitempty)\n\n**API call**: GET /api/flows/export?format=json\n**Indices with null status_code**: 40, 371, 413, 627, 704, 714, 725, 1080, 1102, 1409, 1419, 1447, 1544, 1580, 2200, 2247, 2354, 2355, 2526, 2527, 2528, 2529, 2531, 2547, 2574, 2906, 2912, 2913, 2914, 3119","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T09:14:28.5693484-05:00","updated_at":"2026-01-31T09:38:08.7189104-05:00","closed_at":"2026-01-31T09:38:08.7189104-05:00","close_reason":"Fixed: removed omitempty from StatusCode on FlowSummary and ExportFlowSummary (commit pending). E2E verified 7/7 assertions pass.","labels":["bug","e2e"]}
{"id":"langley-ga3l","title":"Hijacked passthrough tunnels not tracked by http.Server.Shutdown","description":"After handleConnectPassthrough hijacks the client connection, http.Server loses ownership of it. On graceful shutdown, tunnel goroutines run until idle timeout (5 min) or connection drop. Fix: track active tunnels on MITMProxy with a sync.WaitGroup and close them during shutdown. Low priority — acceptable for a dev proxy.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-01T12:04:16.9473586-05:00","updated_at":"2026-02-01T12:04:16.9473586-05:00","labels":["cleanup","proxy"]}
{"id":"langley-gtd","title":"UX: Nav buttons lack aria-current attribute for screen readers","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-30T08:02:07.3551478-05:00","updated_at":"2026-01-31T16:09:42.7404328-05:00","closed_at":"2026-01-31T16:09:42.7404328-05:00","close_reason":"Closed","labels":["accessibility","ux-audit"]}
{"id":"langley-gtn","title":"Extract SettingsView component (self-contained)","description":"Extract renderSettings into a standalone SettingsView component that owns its entire state lifecycle: fetches settings on mount, manages form state (idleGapInput, validation), handles save with saving/saved feedback. Receives only apiFetch (or fetches directly). This is the most self-contained view — zero shared state with the rest of the app.","acceptance_criteria":"- web/src/components/SettingsView.tsx with typed props\n- Component manages its own state: settings, settingsSaving, settingsSaved, idleGapInput\n- Fetches settings on mount via useApi or direct fetch\n- Validation (1-60 range) works identically\n- Save button disabled states preserved (saving, no changes, invalid)\n- Reset button works\n- Saved confirmation with auto-dismiss preserved\n- role=alert on validation error preserved\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:54:09.8427187-05:00","updated_at":"2026-01-31T18:42:12.353128-05:00","closed_at":"2026-01-31T18:42:12.353128-05:00","close_reason":"Extracted SettingsView component","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-gtn","depends_on_id":"langley-pcm","type":"blocks","created_at":"2026-01-31T18:01:55.6548405-05:00","created_by":"unknown"}]}
{"id":"langley-gzom","title":"Flows detail panel inaccessible at narrow widths","description":"Flows view only shows detail/expanded data at certain viewport widths. At smaller sizes the detail panel is unreachable. Need a responsive layout — e.g. slide-over panel or full-screen detail view — so flow details are accessible at any width.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-01T12:27:23.7207211-05:00","updated_at":"2026-02-01T13:26:58.3100005-05:00","closed_at":"2026-02-01T13:26:58.3100005-05:00","close_reason":"Closed","labels":["bug","ux"]}
{"id":"langley-hneg","title":"View individual tool call details in Tools tab","description":"Tools tab shows aggregate tool data but has no way to drill into individual invocations. Add a detail view showing the tool_use_id, input, result, duration, and link to parent flow.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-01T12:27:43.2655414-05:00","updated_at":"2026-02-01T12:27:43.2655414-05:00","labels":["feature","tools"]}
{"id":"langley-hu7","title":"STYLE-GUIDE vs CSS: border-radius:0 claim violated - .status-dot uses border-radius:50% (line 184) and .bar uses border-radius:2px 2px 0 0 (line 602). Two non-zero values exist.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:21:24.1827961-05:00","updated_at":"2026-01-31T06:52:06.3353551-05:00","closed_at":"2026-01-31T06:52:06.3353551-05:00","close_reason":"Already fixed: style guide line 43 documents .status-dot and .bar exceptions"}
{"id":"langley-hxv7","title":"Anomalies: link each warning to its source flow","description":"Anomaly warnings currently show the alert but don't link to the flow that triggered them. Add a clickable flow ID or link that navigates to the flow detail in the Flows tab.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-01T12:27:36.7677926-05:00","updated_at":"2026-02-01T13:26:52.5034258-05:00","closed_at":"2026-02-01T13:26:52.5034258-05:00","close_reason":"Closed","labels":["anomalies","feature"]}
{"id":"langley-in0","title":"MEDIUM: Clancy flow storage has no eviction - unbounded memory growth","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:20:40.7266515-05:00","updated_at":"2026-01-24T18:40:57.1202884-05:00","closed_at":"2026-01-24T18:40:57.1202884-05:00","close_reason":"False positive. No 'Clancy' code exists in codebase - likely refers to removed/nonexistent component."}
{"id":"langley-io4","title":"Tools view: populate success rate, duration, and cost","description":"Tool names and counts now display correctly. Success rate, avg duration, and cost are all zeros because SaveToolInvocation (mitm.go:789-795) only sets ID, FlowID, TaskID, ToolName, and Timestamp.\n\n## Root Cause\nThe ToolInvocation record is created at SSE parse time with no Success, DurationMs, or Cost values. These require cross-request correlation that doesn't exist yet.\n\n## Analysis\n\n**Success/failure** — Determined by tool_result in the NEXT request. The client executes the tool, then sends back a tool_result message with an is_error field. Requires:\n- Parse tool_result blocks from request bodies (not just responses)\n- Match tool_use_id from the response to tool_result tool_use_id in the next request\n- Update the existing ToolInvocation record with success/failure\n\n**Duration** — Real tool execution happens client-side between two API calls. Two options:\n1. Streaming duration: time from content_block_start to content_block_stop (network time, not execution)\n2. Execution duration: time between response containing tool_use and next request containing matching tool_result (requires cross-request correlation, same as success)\n\n**Cost** — Tool calls don't have separate token cost. They're part of the overall flow's input/output token counts. Options:\n1. Remove cost column from Tools view (it's misleading at zero)\n2. Derive from flow-level cost divided by tool count (imprecise)\n3. Leave as-is and document that cost is per-flow, not per-tool\n\n## Scope\n- [ ] Parse tool_result from request bodies to determine success/failure\n- [ ] Correlate tool_use_id across response→request pairs\n- [ ] Update ToolInvocation records with success and duration\n- [ ] Decide on cost column (remove or derive)\n\n## Files\n- internal/proxy/mitm.go (tool invocation creation, request body parsing)\n- internal/parser/sse.go (ExtractToolUses — may need to also extract from request JSON)\n- internal/store/sqlite.go (SaveToolInvocation, update query)\n- web/src/views/ToolsView.tsx (cost column display)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:21:46.946626-05:00","updated_at":"2026-02-01T11:05:05.5704768-05:00","closed_at":"2026-02-01T11:05:05.5704768-05:00","close_reason":"Closed"}
{"id":"langley-jgr","title":"STYLE-GUIDE vs CSS: Modal section claims 'Backdrop: 70% black overlay' - .help-overlay uses rgba(0,0,0,0.7) which is 70% opacity black. ACCURATE. But the guide says 'Focus trap, ESC closes' which is a JS behavior claim, not CSS-verifiable. Existing bead langley-6ne already tracks focus trap bug.","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-31T02:23:17.1365078-05:00","updated_at":"2026-01-31T02:24:00.2717962-05:00","closed_at":"2026-01-31T02:24:00.2717962-05:00"}
{"id":"langley-k5x","title":"SEC-HIGH: GET /auth returns client_secret in response body - credential exposure risk","description":"Phase 3.3 proposes GET /auth returning {client_id, client_secret} in response. Even localhost-only, this means:\\n1. Client secret visible in browser DevTools Network tab\\n2. Logged in any request logging middleware\\n3. Cached in browser history if URL has query params\\n4. Violates OAuth2 best practice where client_secret should never be transmitted to browser","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T16:37:14.5876548-05:00","updated_at":"2026-01-25T17:20:35.1823183-05:00","closed_at":"2026-01-25T17:20:35.1823183-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-k9v8","title":"Security Review: MITM passthrough fix for langley-5rq7 — No custom intercept host config means OpenAI-compatible endpoints bypass interception","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T11:20:27.884113-05:00","updated_at":"2026-02-01T11:20:27.884113-05:00","dependencies":[{"issue_id":"langley-k9v8","depends_on_id":"langley-5rq7","type":"blocks","created_at":"2026-02-01T11:21:02.8668095-05:00","created_by":"unknown"}]}
{"id":"langley-l9f","title":"SPEC-GAP: Missing client identification mechanism in OAuth flow","description":"Phase 3.3 says 'Generates new credentials if none exist for this client' but doesn't specify:\\n1. How is 'this client' identified on first visit?\\n2. Is it by Origin header? User-Agent? IP?\\n3. What prevents credential farming (attacker generating many credentials)?\\n4. How does server correlate localStorage client_id with server-side record?","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:38:04.104375-05:00","updated_at":"2026-01-25T17:20:56.9974362-05:00","closed_at":"2026-01-25T17:20:56.9974362-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-lvoo","title":"Security Review: MITM passthrough fix for langley-5rq7 — 200 Connection Established sent before host check creates timing window","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-01T11:20:34.2227972-05:00","updated_at":"2026-02-01T11:20:34.2227972-05:00","dependencies":[{"issue_id":"langley-lvoo","depends_on_id":"langley-5rq7","type":"blocks","created_at":"2026-02-01T11:21:08.4467457-05:00","created_by":"unknown"}]}
{"id":"langley-m1i","title":"2.3.3: Gemini provider","description":"Implement Google Gemini provider.\n\nDetection: generativelanguage.googleapis.com\n\nUsage parsing:\n- promptTokenCount, candidatesTokenCount\n- Different JSON structure\n\nPricing: Gemini Pro, Gemini Ultra rates\n\nBlocked by: langley-vdn (base abstraction)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T01:04:05.0425029-05:00","updated_at":"2026-01-25T07:33:03.9403328-05:00","closed_at":"2026-01-25T07:33:03.9403328-05:00","close_reason":"Gemini provider implemented. Host detection, JSON and SSE parsing (promptTokenCount/candidatesTokenCount), model version extraction. Tests passing.","labels":["phase2","provider"]}
{"id":"langley-mlj","title":"Export UI shows misleading row count (client-side max 50)","description":"Export confirmation shows filteredFlows.length which is capped at 50 from /api/flows?limit=50. User sees 'Export 50 flows' but export may return thousands.\n\nLocation: web/src/App.tsx:385, 1013-1014\n\nOptions:\n1. Fetch actual count from server before showing confirmation\n2. Add /api/flows/count endpoint\n3. Remove count from UI, just say 'Export matching flows'\n4. Show 'Export up to X flows' with caveat\n\nTDD approach:\n1. Write Playwright test that verifies count shown matches actual export\n2. Implement server-side count or fix UI\n3. Test passes\n\nAcceptance: Export confirmation accurately reflects what will be exported","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T15:48:35.3128318-05:00","updated_at":"2026-01-25T16:06:41.4472389-05:00","closed_at":"2026-01-25T16:06:41.4472389-05:00","close_reason":"Closed"}
{"id":"langley-mmk7","title":"Security Review: MITM passthrough fix for langley-5rq7 — Registry interception list coupled to provider usage parsing","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-01T11:20:40.5804986-05:00","updated_at":"2026-02-01T11:20:40.5804986-05:00","dependencies":[{"issue_id":"langley-mmk7","depends_on_id":"langley-5rq7","type":"blocks","created_at":"2026-02-01T11:21:14.052572-05:00","created_by":"unknown"}]}
{"id":"langley-mxx","title":"Implement LiteLLM pricing integration","description":"Replace hardcoded pricing with LiteLLM's maintained pricing database.\n\n## Context\nCurrent pricing is hardcoded in sqlite.go schema (only 5 Anthropic models, stale data). LiteLLM maintains a comprehensive pricing JSON covering 100+ models across all providers.\n\n## Source\nhttps://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json\n\nFields available:\n- input_cost_per_token, output_cost_per_token\n- cache_creation_input_token_cost, cache_read_input_token_cost\n- litellm_provider (maps to our provider field)\n- max_input_tokens, max_output_tokens\n\n## Implementation\n1. Fetch JSON from GitHub raw URL on startup\n2. Cache locally with TTL (e.g., 24h)\n3. Parse and populate pricing table (or use in-memory map)\n4. Match flow's model name to lookup costs\n5. Fallback gracefully if fetch fails (use cached/bundled version)\n\n## Acceptance Criteria\n- [ ] Remove hardcoded pricing from schema\n- [ ] Fetch LiteLLM pricing JSON on startup\n- [ ] Cache with configurable TTL\n- [ ] Cost calculation works for Anthropic, OpenAI, Bedrock, Gemini\n- [ ] Graceful fallback if network unavailable\n- [ ] Log when pricing data is refreshed\n\n## Files\n- internal/store/sqlite.go (remove hardcoded INSERT)\n- internal/analytics/analytics.go (GetPricing)\n- NEW: internal/pricing/litellm.go (fetch + parse)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:29:33.9346765-05:00","updated_at":"2026-01-26T08:11:21.8485446-05:00","closed_at":"2026-01-26T08:11:21.8485446-05:00"}
{"id":"langley-n8y","title":"Style guide compliance: inline styles, focus-visible, color-scheme","description":"Style guide violations: (1) Token arrow indicators use inline style={{color: 'var(--accent)'}} instead of CSS classes — bypasses cascade (P2-26). (2) .flow-item has tabIndex but no :focus-visible style — keyboard-selected class works for j/k but Tab users get no focus indicator (P2-27). (3) No CSS-level prefers-color-scheme — theme detection is JS-only so light-mode users get a dark flash before JS runs (P3-28). QA audit ref: P2-26 through P3-28.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:55:15.8480588-05:00","updated_at":"2026-01-31T16:55:15.8480588-05:00","labels":["style","ux"]}
{"id":"langley-nln","title":"3.1.3 UX Review: Analytics view","description":"Verify Analytics view features:\n\nA1: Stats cards (6 cards display)\nA2: Total Flows count (correct, updates on new flow)\nA3: Total Cost (formatted, $0.00 when none)\nA4: Total Tokens (In + Out combined, formatted with commas)\nA5: Tasks count (correct, zero tasks)\nA6: Tool Calls count (correct, zero tools)\nA7: Avg Cost/Flow (calculated correctly, division by zero)\nA8: Daily cost chart (bar chart renders, no data → message)\nA9: Chart bar heights (proportional to max, single day)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:48:48.5003018-05:00","updated_at":"2026-01-25T18:45:22.6585182-05:00","closed_at":"2026-01-25T18:45:22.6585182-05:00","close_reason":"Verified: A1-A2 working. Summary cards show correct counts (1001 flows, 30 tasks). Daily cost chart renders. Cost/tokens zero expected for non-LLM traffic."}
{"id":"langley-o6ec","title":"Security Review: MITM passthrough fix for langley-5rq7 — Anthropic DetectHost substring match is overly broad","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T11:20:21.5194955-05:00","updated_at":"2026-02-01T11:20:21.5194955-05:00","dependencies":[{"issue_id":"langley-o6ec","depends_on_id":"langley-5rq7","type":"blocks","created_at":"2026-02-01T11:20:57.268699-05:00","created_by":"unknown"}]}
{"id":"langley-oj3","title":"Test coverage: stale auth tests, WebSocket stubs, no a11y tests","description":"Test suite gaps: (1) Auth tests (dashboard.spec.ts:198-223) reference removed UI — they look for a token input and Connect button that no longer exist. The app now uses cookie auth, but tests still set localStorage tokens (P2-29). (2) WebSocket tests are placeholder stubs with comments like 'In a real test, we would mock the WebSocket connection' (P2-30). (3) No accessibility testing — no axe-core integration or ARIA validation (P3-31). QA audit ref: P2-29 through P3-31.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-31T16:55:24.2999267-05:00","updated_at":"2026-01-31T16:55:24.2999267-05:00","labels":["tests"]}
{"id":"langley-olx","title":"STYLE-GUIDE vs CSS: Cards/Panels section claims 'No shadows' - confirmed, no box-shadow found anywhere in index.css. This claim is ACCURATE.","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-31T02:23:05.575709-05:00","updated_at":"2026-01-31T02:23:54.552179-05:00","closed_at":"2026-01-31T02:23:54.552179-05:00"}
{"id":"langley-oy7","title":"MEDIUM: Error messages may leak internal paths and stack traces","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:21:27.3911293-05:00","updated_at":"2026-01-24T18:43:14.9329177-05:00","closed_at":"2026-01-24T18:43:14.9329177-05:00","close_reason":"Not an issue. Error messages use %w wrapping with generic context (e.g., 'listen: %w', 'config is required'). No stack traces or internal paths exposed."}
{"id":"langley-oy9","title":"HIGH: Langley design specifies raw body storage flag default OFF but no enforcement mechanism","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:20:26.3791379-05:00","updated_at":"2026-01-24T18:48:45.9035537-05:00","closed_at":"2026-01-24T18:48:45.9035537-05:00","close_reason":"Fixed. Added ShouldStoreRawBody() check in mitm.go before storing request/response bodies. When RawBodyStorage=false (default), bodies are not stored. Test added: TestMITMProxy_RawBodyStorageOff"}
{"id":"langley-p46","title":"UX: No loading indicator on view switch","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:09.0980857-05:00","updated_at":"2026-01-30T07:06:09.0980857-05:00","labels":["feedback","ux-audit"]}
{"id":"langley-p8l","title":"Extract AnalyticsView component","description":"Extract renderAnalytics into a standalone AnalyticsView component. Pure presentational — receives stats and dailyCosts as props, renders the stats grid (6 cards) and daily cost bar chart. No state of its own.","acceptance_criteria":"- web/src/components/AnalyticsView.tsx with typed props (stats: Stats | null, dailyCosts: CostPeriod[])\n- Stats grid renders all 6 cards identically\n- Bar chart renders with correct height calculation (max-based percentile)\n- Empty state shown when no cost data or all zeros\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:54:19.6428499-05:00","updated_at":"2026-01-31T18:42:21.1654683-05:00","closed_at":"2026-01-31T18:42:21.1654683-05:00","close_reason":"Extracted AnalyticsView component","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-p8l","depends_on_id":"langley-5yh","type":"blocks","created_at":"2026-01-31T18:02:01.351344-05:00","created_by":"unknown"}]}
{"id":"langley-pc8","title":"Copy-paste env vars at startup","description":"Add copy-paste ready environment variables to startup banner.\n\n## Context\nUsers need to set HTTPS_PROXY and CA trust env vars to use Langley. Currently they must figure this out from docs. Startup should print ready-to-copy commands.\n\n## Tested working:\n- Node.js (Claude CLI, Codex): NODE_EXTRA_CA_CERTS\n- Python httpx/OpenAI SDK: SSL_CERT_FILE  \n- Python requests: REQUESTS_CA_BUNDLE\n\n## Acceptance Criteria\n- [ ] Startup banner includes copy-paste env var block\n- [ ] OS-aware syntax (export for unix, $env: for PowerShell)\n- [ ] Includes HTTPS_PROXY + CA trust vars for Node.js and Python\n- [ ] CA path uses actual resolved path from config\n- [ ] Proxy URL uses actual listen address\n\n## Example output (Unix):\n```\n  Proxy:     http://localhost:9090\n  Dashboard: http://localhost:9091\n  ...\n\n  Copy for your shell:\n\n  # Node.js (Claude CLI, Codex)\n  export HTTPS_PROXY=http://localhost:9090\n  export NODE_EXTRA_CA_CERTS=~/.config/langley/certs/ca.crt\n\n  # Python (OpenAI SDK, LiteLLM, requests)\n  export HTTPS_PROXY=http://localhost:9090\n  export SSL_CERT_FILE=~/.config/langley/certs/ca.crt\n```\n\n## Files\n- cmd/langley/main.go (lines 267-273 startup banner)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:10:26.3384974-05:00","updated_at":"2026-01-29T04:49:16.5891352-05:00","closed_at":"2026-01-27T07:47:00-05:00"}
{"id":"langley-pcm","title":"Extract useApi and useWebSocket hooks from App.tsx","description":"Extract two custom hooks from App.tsx: (1) useApi — wraps apiFetch (authenticated fetch with cookie credentials) and all fetch functions (fetchFlows, fetchStats, fetchTasks, fetchTools, fetchAnomalies, fetchDailyCosts, fetchSettings, fetchFlowDetail, updateSettings). Returns an object of fetchers. (2) useWebSocket — manages WS connection, reconnect with exponential backoff (wsRef, reconnectTimeoutRef, reconnectAttemptsRef), takes an onFlowUpdate callback to push flow updates to the caller. Exposes { connected, connect, error }. Also move existing useHashRoute to hooks/.","acceptance_criteria":"- web/src/hooks/useApi.ts exports useApi hook\n- web/src/hooks/useWebSocket.ts exports useWebSocket hook\n- web/src/hooks/useHashRoute.ts exports useHashRoute hook (moved from App.tsx)\n- App.tsx uses all three hooks instead of inline logic\n- WebSocket reconnect logic (exponential backoff, max 5 attempts) preserved exactly\n- apiFetch 401/403 error handling preserved\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:53:38.4562941-05:00","updated_at":"2026-01-31T18:41:56.7386904-05:00","closed_at":"2026-01-31T18:41:56.7386904-05:00","close_reason":"Extracted useApi, useWebSocket, useHashRoute hooks","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-pcm","depends_on_id":"langley-5yh","type":"blocks","created_at":"2026-01-31T18:01:44.234243-05:00","created_by":"unknown"}]}
{"id":"langley-pfe","title":"Expand Playwright coverage","description":"Extend Playwright E2E tests for better UI coverage.\n\n## Context\nCurrent Playwright tests (743 lines) are well-organized but:\n- WebSocket testing is stubbed ('actual WS testing requires more setup')\n- All tests use mocked API responses\n- Some edge cases not covered\n\n## Acceptance Criteria\n- [ ] Real WebSocket connection testing (flow updates)\n- [ ] Error state testing (network failures, 500s, timeouts)\n- [ ] Pagination edge cases (empty pages, last page)\n- [ ] Filter combinations (multiple filters active)\n- [ ] Export functionality (CSV/JSON download verification)\n- [ ] Mobile viewport testing (responsive design)\n- [ ] Accessibility audit (axe-core integration)\n\n## Nice to have\n- [ ] Visual regression tests (screenshot comparison)\n- [ ] Performance metrics (Core Web Vitals)\n\n## Files\n- web/tests/dashboard.spec.ts\n- web/playwright.config.ts","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-25T19:11:45.607-05:00","updated_at":"2026-01-25T19:11:45.607-05:00"}
{"id":"langley-pff","title":"UX: Focus does not move to detail panel on open","description":"","status":"open","priority":3,"issue_type":"bug","created_at":"2026-01-30T07:06:25.5921008-05:00","updated_at":"2026-01-30T07:06:25.5921008-05:00","labels":["accessibility","ux-audit"]}
{"id":"langley-qhc","title":"UX: No loading state in detail panel","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:20.0894395-05:00","updated_at":"2026-01-30T07:06:20.0894395-05:00","labels":["feedback","ux-audit"]}
{"id":"langley-r0t","title":"LOW: Node-forge dependency is a known audit target for cryptographic implementations","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T07:21:48.1077655-05:00","updated_at":"2026-01-24T16:16:05.6623647-05:00","closed_at":"2026-01-24T16:16:05.6623647-05:00","close_reason":"N/A - Langley is Go-based, not Node/Node-forge"}
{"id":"langley-r15","title":"Decompose god component (App.tsx, 1122 lines)","description":"App.tsx is a single 1122-line function with 22 useState hooks, 9 useCallback hooks, 5 useEffect hooks, 7 inner render closures, and zero child components. Every concern (data fetching, state, routing, keyboard handling, rendering) is tangled. Decompose into ~8-10 focused components: FlowList, FlowDetail, Analytics, Tasks, Tools, Anomalies, Settings, Nav. Extract types to shared module. This is the root cause of P1-04 (race conditions), P2-09 (no loading states), P2-22 (render jank), and blocks all future maintenance. QA audit ref: P1-01.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T16:53:53.6797167-05:00","updated_at":"2026-01-31T17:39:48.9982756-05:00","closed_at":"2026-01-31T17:39:48.9982756-05:00","close_reason":"Duplicate of langley-9fg","labels":["structure","ux"]}
{"id":"langley-r7q","title":"MEDIUM: Console logging may persist sensitive data to log files","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:21:33.8396906-05:00","updated_at":"2026-01-24T18:44:15.3104024-05:00","closed_at":"2026-01-24T18:44:15.3104024-05:00","close_reason":"Not an issue. Logging is secure: auth failures log token LENGTH not value (api.go:126), config reload logs whether token changed as boolean (api.go:713). No sensitive data logged."}
{"id":"langley-ra2","title":"UX: Task rows lack visual clickability cues","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-30T07:06:47.7053556-05:00","updated_at":"2026-01-30T07:06:47.7053556-05:00","labels":["discoverability","ux-audit"]}
{"id":"langley-rhzp","title":"Final cleanup: thin App.tsx orchestrator + keyboard hook","description":"Final step of the decomposition. Extract the keyboard navigation effect (L446-526) into a useKeyboardNavigation hook. App.tsx becomes a thin orchestrator that: imports all components and hooks, manages only shared state (view, selectedIndex, error, theme), composes children with props. Target: App.tsx under 200 lines. Run E2E smoke test to confirm everything works end-to-end.","acceptance_criteria":"- web/src/hooks/useKeyboardNavigation.ts extracted\n- App.tsx is under 200 lines\n- App.tsx contains no render logic — only component composition\n- No inline JSX beyond the top-level layout structure\n- All keyboard shortcuts still work (j/k, Enter, /, Escape, ?, 1-6)\n- Theme toggle works\n- WebSocket connection indicator works\n- Cross-view navigation works (tasks→flows, anomalies→flows)\n- make check passes\n- E2E smoke test passes (all views render, navigation works)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T18:01:32.1462279-05:00","updated_at":"2026-01-31T18:42:44.0126168-05:00","closed_at":"2026-01-31T18:42:44.0126168-05:00","close_reason":"App.tsx thinned to 191 lines, keyboard nav extracted to hook","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-rhzp","depends_on_id":"langley-ffw","type":"blocks","created_at":"2026-01-31T18:02:18.4086151-05:00","created_by":"unknown"},{"issue_id":"langley-rhzp","depends_on_id":"langley-gtn","type":"blocks","created_at":"2026-01-31T18:02:24.0834611-05:00","created_by":"unknown"},{"issue_id":"langley-rhzp","depends_on_id":"langley-p8l","type":"blocks","created_at":"2026-01-31T18:02:29.7637215-05:00","created_by":"unknown"},{"issue_id":"langley-rhzp","depends_on_id":"langley-rqh","type":"blocks","created_at":"2026-01-31T18:02:35.4537442-05:00","created_by":"unknown"},{"issue_id":"langley-rhzp","depends_on_id":"langley-2cq","type":"blocks","created_at":"2026-01-31T18:02:41.1356797-05:00","created_by":"unknown"}]}
{"id":"langley-rla","title":"Auto port fallback","description":"Automatically try next port if default is in use.\n\n## Context\nIf port 9090 is in use, Langley fails with cryptic Go error. Should auto-try 9092, 9093, etc. (9091 is dashboard).\n\n## Current behavior\n```\nlisten tcp 127.0.0.1:9090: bind: Only one usage of each socket address...\n```\n\n## Target behavior\n```\nPort 9090 in use, trying 9092... \n  Proxy: http://localhost:9092\n```\n\n## Acceptance Criteria\n- [ ] Pre-check if proxy port is available before binding\n- [ ] If in use, try next ports (skip 9091 - that's dashboard)\n- [ ] Log which port was selected\n- [ ] Give up after N attempts (e.g., 5) with clear error\n- [ ] Same logic for API port (9091 -\u003e 9093, 9094...)\n- [ ] Env var override still respected (don't auto-fallback if explicit)\n\n## Files\n- cmd/langley/main.go (proxy.Serve, apiSrv.ListenAndServe)\n- internal/proxy/proxy.go (if Serve needs changes)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T06:10:41.88951-05:00","updated_at":"2026-01-31T01:46:45.170523-05:00","closed_at":"2026-01-31T01:46:45.170523-05:00","close_reason":"Closed"}
{"id":"langley-rpg","title":"2.4.4: Implement export flows as CSV/JSON","description":"Implement flow export per .docs/spikes/export-flows.md:\n- NDJSON streaming for large exports\n- Summary (default) vs full (with bodies) modes\n- API endpoint: GET /api/flows/export\n- Uses existing filters + format/include_bodies params\n- ~300 LOC\n\nFollows from spike in langley-su1.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T07:41:17.2983434-05:00","updated_at":"2026-01-25T10:57:32.9643413-05:00","closed_at":"2026-01-25T10:57:32.9643413-05:00","close_reason":"Split into 3 smaller tasks: langley-3d4 (NDJSON endpoint), langley-boc (format abstraction), langley-2kp (frontend UI)","labels":["api","phase2"]}
{"id":"langley-rqh","title":"Extract TasksView and ToolsView components","description":"Extract renderTasks and renderTools into standalone components. Both are table-based views with similar structure. TasksView: receives tasks, selectedIndex, and an onTaskSelect(taskId: string) callback that the parent uses to set taskFilter and navigate to flows. ToolsView: receives tools and selectedIndex (read-only display, no cross-nav).","acceptance_criteria":"- web/src/components/TasksView.tsx with typed props (tasks, selectedIndex, onTaskSelect)\n- web/src/components/ToolsView.tsx with typed props (tools, selectedIndex)\n- Table aria-labels preserved\n- keyboard-selected class applied correctly via selectedIndex\n- scrollIntoView on selected row preserved\n- TasksView onClick triggers onTaskSelect callback (not direct state mutation)\n- Empty states rendered for zero items\n- make check passes\n- Zero behavior change","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:55:01.5955714-05:00","updated_at":"2026-01-31T18:42:28.7917845-05:00","closed_at":"2026-01-31T18:42:28.7917845-05:00","close_reason":"Extracted TasksView and ToolsView components","labels":["refactor structure"],"dependencies":[{"issue_id":"langley-rqh","depends_on_id":"langley-5yh","type":"blocks","created_at":"2026-01-31T18:02:07.0155029-05:00","created_by":"unknown"}]}
{"id":"langley-s06","title":"STYLE-GUIDE vs CSS: Interactive target 44x44px claim - .close-btn has padding:0, .link-btn has padding:0 and font-size:0.75rem. .nav button has padding:0.5rem 1rem (8px 16px). .theme-toggle has padding:0.375rem 0.625rem (6px 10px). None of these enforce min-height/min-width of 44px. Multiple buttons FAIL the 44x44px minimum.","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T02:22:15.8629549-05:00","updated_at":"2026-01-31T02:54:37.8029056-05:00","closed_at":"2026-01-31T02:54:37.8029056-05:00","close_reason":"Closed"}
{"id":"langley-su1","title":"2.4.4: Export flows as CSV/JSON","description":"Research spike to find right setup.\n\nGoal: Allow users to download captured flows for external analysis.\n\nQuestions to answer:\n- What fields to include in export?\n- Streaming export for large datasets vs in-memory?\n- Frontend download trigger vs API endpoint?\n- Date range / filter support?\n- How to handle large response bodies?\n\nAcceptance: Document approach, define API contract.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:04:17.0736123-05:00","updated_at":"2026-01-24T18:29:16.9036823-05:00","closed_at":"2026-01-24T18:29:16.9036823-05:00","close_reason":"Spike complete. Documented in .docs/spikes/export-flows.md. Key decisions: NDJSON streaming for large exports, summary (default) vs full (with bodies) modes, API endpoint at GET /api/flows/export with existing filters + format/include_bodies params. ~300 LOC to implement.","labels":["phase2","spike"]}
{"id":"langley-sun","title":"3.1.7 UX Review: Settings view","description":"Verify Settings view features:\n\nS1: Idle gap setting (change value, save; invalid value 0/negative)\nS2: Save button (saves to server, failure → error message)\nS3: Current value load (shows current setting, server unreachable)\n\nAcceptance:\n- Manual verification of each feature\n- Document bugs as beads\n- Playwright test coverage","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T16:49:44.5478354-05:00","updated_at":"2026-01-25T18:45:52.7614345-05:00","closed_at":"2026-01-25T18:45:52.7614345-05:00","close_reason":"Verified: S1-S4 working. Settings shows Task Grouping with idle gap input (5 min default). Save button disabled until change. Note explains new calls only."}
{"id":"langley-tot","title":"STYLE-GUIDE vs CSS: Motion section claims 150-300ms durations but most transitions use 0.3s (300ms) and .flow-item/.data-table use 0.15s (150ms). 300ms is the max stated but 0.3s=300ms so barely within range. However the guide says NO decorative animation yet .bar chart has 'transition: height 0.3s' which is decorative/cosmetic animation on bar chart rendering.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T02:21:29.9598241-05:00","updated_at":"2026-01-31T06:52:13.1658436-05:00","closed_at":"2026-01-31T06:52:13.1658436-05:00","close_reason":"Already fixed: style guide lines 46-48 document chart bar height transition exception"}
{"id":"langley-ttz","title":"CORS: localhost origin check doesn't validate port - localhost:9999 allowed","description":"","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T12:25:05.4908724-05:00","updated_at":"2026-01-24T18:45:34.5303988-05:00","closed_at":"2026-01-24T18:45:34.5303988-05:00","close_reason":"By design. All localhost origins trusted since this is a local dev tool. Port doesn't matter - any localhost app is presumed trusted."}
{"id":"langley-u6n","title":"2.5: Documentation and Release","description":"Implement then Reba review.\n\nScope from PHASE2.md:\n- 2.5.1: Architecture doc (for contributors)\n- 2.5.2: API reference (OpenAPI spec)\n- 2.5.3: Troubleshooting guide (common issues)\n- 2.5.4: Release binaries (goreleaser: Win/Mac/Linux) + version injection\n- 2.5.5: Homebrew formula / Scoop manifest\n- 2.5.6: Update blog with Phase 2 features\n\nVersion injection required:\n```bash\ngo build -ldflags \"-X main.Version=$(git describe --tags --always) ...\"\n```\n\nAcceptance: User can install and run in \u003c 5 minutes on any platform.\nReba validates docs accuracy and release artifacts.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:14:24.1214449-05:00","updated_at":"2026-01-25T14:34:46.0279759-05:00","closed_at":"2026-01-25T14:34:46.0279759-05:00","close_reason":"README updated with Phase 2 features. Architecture doc, OpenAPI, troubleshooting guide deferred to Phase 3.","labels":["docs","phase2","reba-review"]}
{"id":"langley-uh1","title":"STYLE-GUIDE vs CSS: Typography claims weight range 400-700 but CSS uses 500 (line 283, 490, 609, 840) and 600 (lines 109,160,263,300,340,393,720,728,895,916) in addition to 400(implicit) and 700. Range is technically accurate but 500 and 600 are the dominant weights, not just endpoints.","description":"","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-31T02:21:18.2225132-05:00","updated_at":"2026-01-31T02:21:18.2225132-05:00"}
{"id":"langley-uw4","title":"Planning spike: App.tsx decomposition strategy","description":"Analyze App.tsx to map state/effect dependencies, identify clean extraction boundaries, and produce a set of well-defined beads with acceptance criteria that together achieve the full decomposition of the god component (langley-9fg). Deliverable: individual beads filed, each with clear scope and A/C, blocking langley-9fg.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-31T17:43:43.2443943-05:00","updated_at":"2026-01-31T18:03:07.6419921-05:00","closed_at":"2026-01-31T18:03:07.6419921-05:00","close_reason":"Spike complete: 8 beads created with A/C covering full decomposition","labels":["spike planning structure"],"dependencies":[{"issue_id":"langley-uw4","depends_on_id":"langley-rhzp","type":"blocks","created_at":"2026-01-31T18:02:46.8174331-05:00","created_by":"unknown"}]}
{"id":"langley-v49","title":"DATA EXPOSURE: Request/response bodies stored in SQLite without encryption at rest","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T12:24:35.098993-05:00","updated_at":"2026-01-24T18:44:30.1924865-05:00","closed_at":"2026-01-24T18:44:30.1924865-05:00","close_reason":"Acceptable for local dev tool. Bodies are protected by: 1) File permissions (0600 on DB), 2) Redaction of API keys/secrets before storage. Encryption at rest is nice-to-have, not critical for single-user local proxy."}
{"id":"langley-vdn","title":"2.3.0: Provider interface + Anthropic extraction","description":"Base abstraction for multi-provider support.\n\n1. Define Provider interface in internal/provider/provider.go:\n   - DetectProvider(host string) bool\n   - ParseUsage(body []byte, isSSE bool) (*Usage, error)\n   - GetPricing(model string) (*Pricing, error)\n   - Name() string\n\n2. Extract current Anthropic logic from mitm.go into internal/provider/anthropic.go\n\n3. Create provider registry that selects provider by host\n\n4. Wire into mitm.go - replace hardcoded Anthropic logic with registry lookup\n\nUnblocks: OpenAI, Bedrock, Gemini providers","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T01:03:25.1948949-05:00","updated_at":"2026-01-25T03:32:17.36398-05:00","closed_at":"2026-01-25T03:32:17.36398-05:00","close_reason":"Complete. Provider interface defined, Anthropic implementation extracted, registry wired into mitm.go. Dead code removed. Tests added and passing.","labels":["phase2","provider"]}
{"id":"langley-vfoi","title":"Test Strategy: langley-5rq7 host-based MITM routing in handleConnect","description":"","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-01T11:19:49.3725653-05:00","updated_at":"2026-02-01T11:19:49.3725653-05:00"}
{"id":"langley-vu5","title":"CRITICAL: Go uTLS binary uses InsecureSkipVerify for ALL upstream connections","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-24T07:19:30.8037216-05:00","updated_at":"2026-01-24T16:14:11.2356439-05:00","closed_at":"2026-01-24T16:14:11.2356439-05:00","close_reason":"Fixed - InsecureSkipVerify: false"}
{"id":"langley-vvk","title":"MEDIUM: No rate limiting on API endpoints - DoS via excessive requests","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:21:14.3694264-05:00","updated_at":"2026-01-24T16:15:08.0294854-05:00","closed_at":"2026-01-24T16:15:08.0294854-05:00","close_reason":"Fixed in Phase 2.2.9 - Token bucket rate limiter"}
{"id":"langley-wfw","title":"DB schema rejects openai/gemini providers","description":"flows.provider CHECK constraint only allows 'anthropic|bedrock|other'. OpenAI and Gemini providers will fail on insert.\n\nLocation: internal/store/sqlite.go:166\n\nTDD approach:\n1. Write test that inserts flow with provider='openai' - should fail now\n2. Write test that inserts flow with provider='gemini' - should fail now\n3. Fix CHECK constraint to include 'openai' and 'gemini'\n4. Tests pass\n\nAcceptance: Can insert flows with all 5 provider values (anthropic, openai, bedrock, gemini, other)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T15:47:40.9351259-05:00","updated_at":"2026-01-25T16:01:36.7192937-05:00","closed_at":"2026-01-25T16:01:36.7192937-05:00","close_reason":"Closed"}
{"id":"langley-wll","title":"SEC-MEDIUM: No client credential rotation mechanism specified","description":"Phase 3.3 lacks specification for:\\n1. How to rotate compromised client credentials\\n2. Client credential lifecycle management\\n3. What happens when user clears localStorage - new credentials generated?\\n4. Maximum number of active client registrations per server","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T16:37:26.3878249-05:00","updated_at":"2026-01-25T17:21:07.8772684-05:00","closed_at":"2026-01-25T17:21:07.8772684-05:00","close_reason":"Obsolete: OAuth design replaced with Origin + Cookie auth"}
{"id":"langley-wz9","title":"OBSERVATION: Langley is design-only - no implementation code exists yet","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T07:22:33.2553065-05:00","updated_at":"2026-01-24T16:15:35.602206-05:00","closed_at":"2026-01-24T16:15:35.602206-05:00","close_reason":"Implementation exists - langley is no longer design-only"}
{"id":"langley-xj8","title":"2.3.1: OpenAI provider","description":"Implement OpenAI provider.\n\nDetection: api.openai.com\n\nUsage parsing:\n- prompt_tokens, completion_tokens (not input/output)\n- No cache tokens\n- SSE: data: [DONE] marker\n\nPricing: GPT-4o, GPT-4-turbo, GPT-3.5-turbo rates\n\nBlocked by: langley-vdn (base abstraction)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T01:03:39.7882136-05:00","updated_at":"2026-01-25T07:24:44.9442424-05:00","closed_at":"2026-01-25T07:24:44.9442424-05:00","close_reason":"OpenAI provider implemented with host detection (openai.com), JSON and SSE parsing (prompt_tokens/completion_tokens), tests passing.","labels":["phase2","provider"]}
{"id":"langley-xmg","title":"2.4.1: Embed frontend with go:embed","description":"Research spike to find right setup.\n\nGoal: Single binary that serves the React dashboard without needing separate frontend build/serve.\n\nQuestions to answer:\n- How to integrate Vite build output with go:embed?\n- Build-time vs runtime embedding tradeoffs?\n- How to handle dev mode (hot reload) vs prod mode (embedded)?\n- What's the standard pattern in Go web apps?\n\nAcceptance: Document approach, prototype works.","notes":"COMPLETE: Frontend embedded with go:embed. Single binary serves dashboard at /. API at /api/*. 18MB binary includes React app. Tests added.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T17:04:02.0743494-05:00","updated_at":"2026-01-24T18:21:16.8711554-05:00","closed_at":"2026-01-24T18:21:16.8711554-05:00","labels":["phase2","spike"]}
{"id":"langley-xpi","title":"CRITICAL: CA private key stored without encryption or file permissions","description":"","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-24T07:19:24.3023494-05:00","updated_at":"2026-01-24T18:35:28.544378-05:00","closed_at":"2026-01-24T18:35:28.544378-05:00","close_reason":"File permissions already implemented: 0600 on ca.key, 0700 on certs dir (internal/tls/ca.go:52,192). Encryption at rest is nice-to-have for local dev tool, not critical. Bead title was inaccurate."}
{"id":"langley-xri","title":"UX: No data cap indicator — flows list shows subset without total count","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T07:04:37.3831175-05:00","updated_at":"2026-01-31T07:13:32.6133045-05:00","closed_at":"2026-01-31T07:13:32.6133045-05:00","close_reason":"Added flow count indicator showing X of Y when total exceeds displayed count","labels":["information","ux-audit"]}
{"id":"langley-ykg","title":"REDACTION GAP: No redaction for OpenAI API key format (sk-proj-*, sk-svcacct-*)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T12:22:57.2771922-05:00","updated_at":"2026-01-24T16:14:51.6214063-05:00","closed_at":"2026-01-24T16:14:51.6214063-05:00","close_reason":"Fixed in Phase 2.2.3 - OpenAI patterns sk-proj-*, sk-svcacct-*"}
{"id":"langley-yni","title":"HIGH: No authentication on WebSocket or REST API endpoints","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T07:19:44.8358458-05:00","updated_at":"2026-01-24T16:15:30.1243153-05:00","closed_at":"2026-01-24T16:15:30.1243153-05:00","close_reason":"Fixed - Bearer token auth on API and WebSocket"}
{"id":"langley-zql","title":"REDACTION GAP: No redaction for Bedrock/AWS credentials (AKIA*, aws_secret_access_key)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T12:23:06.8980353-05:00","updated_at":"2026-01-24T16:14:46.1583928-05:00","closed_at":"2026-01-24T16:14:46.1583928-05:00","close_reason":"Fixed in Phase 2.2.4 - x-amz-security-token added"}
{"id":"langley-zs0","title":"Fix FOUC: index.html inline colors dont match CSS tokens","description":"index.html uses hardcoded #0f172a (blue-ish dark) and #e2e8f0, but CSS tokens define --bg-primary: #161618 (neutral dark) and --text-primary: #ffffff. Every page load shows a visible flash from wrong background to correct background. Fix: match inline styles to actual CSS token values, or use CSS-only prefers-color-scheme. Style guide rule: 'Only use token variables in CSS.' index.html lines 16-19, index.css token definitions. QA audit ref: P1-25.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-31T16:54:25.6486359-05:00","updated_at":"2026-01-31T17:35:47.4396696-05:00","closed_at":"2026-01-31T17:15:07.539273-05:00","labels":["style","ux"]}
